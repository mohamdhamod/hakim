const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/swiper-DpKYHp1-.js","assets/utils-D71RtZIR.js","assets/index-BvN21dhf.js","assets/quill-ChYgufvi.js","assets/vendor-CnHzkViu.js","assets/easymde-Ca5tH7jq.js"])))=>i.map(i=>d[i]);
import{r as se,a as ie,b as ae,D as X}from"./vendor-CnHzkViu.js";const ce="modulepreload",le=function(e){return"/build/"+e},j={},k=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){let c=function(p){return Promise.all(p.map(l=>Promise.resolve(l).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");i=c(n.map(p=>{if(p=le(p),p in j)return;j[p]=!0;const l=p.endsWith(".css"),b=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":ce,l||(d.as="script"),d.crossOrigin="",d.href=p,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};se();ie();let z=!1;async function N(){if(z||!document.getElementById("contentChart"))return;const t=await k(()=>import("./auto-CcLMyVVA.js"),[]),n=t&&t.default?t.default:t;window.Chart=n,z=!0,window.chartsInitialized=!0,n.defaults&&(n.defaults.animation=n.defaults.animation||{},n.defaults.animation.duration=1e3,n.defaults.animation.easing="easeOutQuart",n.defaults.responsive=!0)}function de(){document.readyState==="complete"?N():window.addEventListener("load",N)}window.initializeCharts=N;de();document.addEventListener("DOMContentLoaded",function(){initializeCharts(),ue()});function ue(){const e=document.documentElement;window.innerWidth<992?e.setAttribute("data-sidenav-size","offcanvas"):e.setAttribute("data-sidenav-size","default"),U()}function W(){const e=document.documentElement;e.getAttribute("data-sidenav-size")==="collapse"?e.setAttribute("data-sidenav-size","default"):e.setAttribute("data-sidenav-size","collapse"),U(),typeof V=="function"&&V()}function U(){const e=document.documentElement,t=document.querySelector(".menu-collapse-box .button-collapse-toggle");if(!t)return;const n=t.querySelector("i"),o=t.querySelector("span"),i=e.getAttribute("data-sidenav-size")==="collapse",s=t.getAttribute("data-text-collapse")||(o&&o.textContent?o.textContent:""),r=t.getAttribute("data-text-expand")||s;if(n){const c=i?"bi bi-chevron-double-right":"bi bi-chevron-double-left";n.className!==c&&(n.className=c)}if(o){const c=i?r:s;o.textContent!==c&&(o.textContent=c)}const a=document.querySelector(".sidenav-menu");a&&(i?a.classList.add("force-collapse"):a.classList.remove("force-collapse"))}function G(){document.documentElement.classList.toggle("sidebar-enable"),typeof V=="function"&&V()}window.toggleSidebar=W;window.toggleMobileSidebar=G;document.addEventListener("click",function(e){const t=document.getElementById("sidenavMenu"),n=document.querySelector(".button-collapse-toggle.d-xl-none"),o=document.documentElement;window.innerWidth<992&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&o.classList.contains("sidebar-enable")&&o.classList.remove("sidebar-enable")});function fe(){const e=document.documentElement;window.innerWidth>=992?(e.classList.remove("sidebar-enable"),e.getAttribute("data-sidenav-size")==="offcanvas"&&e.setAttribute("data-sidenav-size","default")):e.getAttribute("data-sidenav-size")!=="offcanvas"&&e.setAttribute("data-sidenav-size","offcanvas"),U()}function me(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}}function V(){const e=document.documentElement;try{e&&e.getAttribute&&e.getAttribute("dir")==="rtl"&&(e.classList.add("ins-rtl-repaint"),setTimeout(()=>e.classList.remove("ins-rtl-repaint"),60))}catch{}}function pe(e,t){const n=document.getElementById("selected-language-image"),o=document.getElementById("selected-language-flag"),i=document.getElementById("selected-language-code");if(n&&(t?n.src=t:window.FLAG_URLS&&window.FLAG_URLS[e]&&(n.src=window.FLAG_URLS[e])),o){const s=[];o.classList.forEach(r=>{r.startsWith("fi-")&&s.push(r)}),s.forEach(r=>o.classList.remove(r)),o.classList.add(`fi-${e}`)}i&&(i.textContent=` ${e.toUpperCase()}`)}window.changeLanguage=pe;window.addEventListener("resize",me(fe,150));document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".menu-collapse-box .button-collapse-toggle");e&&(e.getAttribute("onclick")||e.addEventListener("click",function(n){W()}));const t=document.querySelector(".button-collapse-toggle.d-xl-none");t&&(t.getAttribute("onclick")||t.addEventListener("click",function(n){G()}))});document.addEventListener("DOMContentLoaded",function(){typeof initializeCharts=="function"&&initializeCharts();var e=document.querySelector(".topbar-link .bi-moon, .topbar-link .bi-moon-stars");e&&e.parentElement.addEventListener("click",function(){var t=document.documentElement,n=t.getAttribute("data-bs-theme");t.setAttribute("data-bs-theme",n==="dark"?"light":"dark")})});document.addEventListener("click",function(e){try{let s=function(r){return function a(c){if(!(c&&c.propertyName&&c.propertyName!=="max-height")){var p=r.closest(".card"),l=p&&p.classList.contains("card-collapse");l?(r.style.overflow="hidden",r.style.maxHeight="0px"):(r.style.overflow="",r.style.maxHeight=""),r.__cardAnimating=!1,r.removeEventListener("transitionend",a)}}};var t=e.target&&e.target.closest?e.target.closest(".card-action-item"):null;if(!t)return;var n=t.closest(".card");if(!n)return;var o=!n.classList.contains("card-collapse"),i=n.querySelectorAll(".card-body");i.forEach(function(r){r.__cardAnimating;var a=r.scrollHeight,c=s(r);r.__cardAnimating=!0,r.style.transition=r.style.transition||"max-height 0.28s ease",o?(r.style.maxHeight=a+"px",requestAnimationFrame(function(){r.style.overflow="hidden",r.style.maxHeight="0px"}),r.addEventListener("transitionend",c)):(r.style.overflow="hidden",r.style.maxHeight="0px",requestAnimationFrame(function(){r.style.maxHeight=r.scrollHeight+"px"}),r.addEventListener("transitionend",c))}),n.classList.toggle("card-collapse")}catch{}});document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)});try{document.querySelectorAll(".card.card-collapse").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.overflow="hidden",n.style.maxHeight="0px"})}),document.querySelectorAll(".card:not(.card-collapse)").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.maxHeight="",n.style.overflow=""})})}catch{}});const $={TOAST_DELAY:5e3,ANIMATION_DURATION:220,PRINT_DELAY:250},K={isAvailable(){return typeof Swal<"u"&&typeof Swal.fire=="function"},showLoading(e,t=""){return this.isAvailable()?Swal.fire({title:e||window.i18n?.messages?.processing||"Processing...",text:t,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>Swal.showLoading()}):null},success(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"success",title:e,text:t,timer:n.timer||2500,timerProgressBar:!0,...n}):(alert(e),Promise.resolve({isConfirmed:!0}))},error(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"error",title:e,text:t,confirmButtonText:window.i18n?.messages?.ok||"OK",...n}):(alert(e+(t?`
`+t:"")),Promise.resolve({isConfirmed:!0}))},confirm(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:n.icon||"warning",title:e,text:t,showCancelButton:!0,confirmButtonColor:n.confirmButtonColor||"#3085d6",cancelButtonColor:n.cancelButtonColor||"#d33",confirmButtonText:n.confirmButtonText||window.i18n?.messages?.confirm||"Confirm",cancelButtonText:n.cancelButtonText||window.i18n?.messages?.cancel||"Cancel",...n}):Promise.resolve({isConfirmed:confirm(e+(t?`
`+t:""))})},toast(e,t="success",n={}){return this.isAvailable()?Swal.fire({icon:t,title:e,toast:!0,position:n.position||"top-end",showConfirmButton:!1,timer:n.timer||2500,timerProgressBar:!0,...n}):(console.log(`[${t}] ${e}`),Promise.resolve())},close(){this.isAvailable()&&Swal.close()}},v=function(){const e=document.querySelector('meta[name="recaptcha-site-key"]')?.getAttribute("content")||"";let t=null,n=0;function o(){return!!e&&typeof window.grecaptcha<"u"&&typeof window.grecaptcha.execute=="function"}function i(d=2500){return e?o()?Promise.resolve(!0):n&&Date.now()<n?Promise.resolve(!1):t||(t=new Promise(m=>{const f=Date.now();try{if(!document.querySelector('script[src*="www.google.com/recaptcha/api.js"]')){const g=document.createElement("script");g.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(e)}`,g.async=!0,g.defer=!0,document.head.appendChild(g)}}catch{}const u=()=>{if(o())return m(!0);if(Date.now()-f>=d)return m(!1);setTimeout(u,80)};u()}).then(m=>(m||(n=Date.now()+3e4),m)).finally(()=>{o()||(t=null)}),t):Promise.resolve(!1)}function s(d){return String(d||"submit").trim().toLowerCase().replace(/-/g,"_").replace(/[^a-z_\/]/g,"_").replace(/_+/g,"_").replace(/\/+?/g,"/").replace(/^_+|_+$/g,"").replace(/\/_+/g,"/").replace(/_+\//g,"/").slice(0,80)||"submit"}function r(d){const f=String(d||"").split("?")[0].split("#")[0].split("/").filter(Boolean),u=[];for(let h=0;h<f.length;h++){const g=String(f[h]||"").trim();if(!g||h===0&&/^[a-z]{2}$/i.test(g)||/^\d+$/.test(g)||/^[0-9a-f]{8,}$/i.test(g))continue;let y=g.toLowerCase().replace(/-/g,"_").replace(/[^a-z_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");y&&u.push(y)}return u.join("/")}function a(d){if(!d)return"submit";const m=d.getAttribute("data-recaptcha-action");if(m)return s(m);if(d.id)return s("form_"+d.id);const f=d.action||window.location.pathname;try{const u=new URL(f,window.location.origin).pathname;return s(r(u))}catch{return"submit"}}function c(d,m="submit"){const f=String(m||"submit").trim().toLowerCase();try{const u=new URL(String(d||""),window.location.origin).pathname,h=r(u);return s(`${f}_${h||"submit"}`)}catch{return s(`${f}_submit`)}}async function p(d){if(!o()&&(!await i()||!o()))return null;const m=s(d);return await new Promise(f=>{try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:m}).then(u=>f(u)).catch(()=>f(null))})}catch{f(null)}})}function l(d){if(d){if(!d.querySelector('input[name="g-recaptcha-response"]')){const m=document.createElement("input");m.type="hidden",m.name="g-recaptcha-response",d.appendChild(m)}if(!d.querySelector('input[name="recaptcha_action"]')){const m=document.createElement("input");m.type="hidden",m.name="recaptcha_action",d.appendChild(m)}}}function b(d,m,f){l(d);const u=d.querySelector('input[name="g-recaptcha-response"]'),h=d.querySelector('input[name="recaptcha_action"]');u&&(u.value=m||""),h&&(h.value=s(f))}return{isAvailable:o,ensureLoaded:i,deriveAction:a,deriveActionFromUrl:c,execute:p,setOnForm:b,siteKey:e}}(),Y=document.querySelector('meta[name="login-url"]')?.getAttribute("content")||"/login";if(typeof window.fetch=="function"&&!window.__fetchSessionWrapped){const e=window.fetch.bind(window);window.fetch=async(t,n=void 0)=>{try{const i=String(n&&n.method||(t instanceof Request?t.method:"GET")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(i)&&v&&v.siteKey){const s=t instanceof Request?t.url:String(t||""),r=new URL(s,window.location.href);if(r.origin===window.location.origin){const a=n&&n.headers?n.headers:t instanceof Request?t.headers:void 0,c=new Headers(a||{});if(!c.has("X-Recaptcha-Token")){const p=v.deriveActionFromUrl(r.href,i.toLowerCase()),l=await v.execute(p);l&&(c.set("X-Recaptcha-Token",l),n=Object.assign({},n||{},{headers:c}))}}}}catch{}const o=await e(t,n);if(o&&(o.status===401||o.status===419)){try{S.show(window.i18n?.messages?.session_expired_redirecting||window.i18n?.messages?.session_expired||"","warning")}catch{}setTimeout(()=>{window.location.href=Y},500)}return o},window.__fetchSessionWrapped=!0}const S=function(){let e=null;const t=$.TOAST_DELAY;function n(){if(document.getElementById("ins-toast-styles"))return;const r=`
        .ins-toast-container{position:fixed;right:1rem;bottom:1rem;z-index:10850;display:flex;flex-direction:column;gap:0.5rem;max-width:360px;pointer-events:none}
        @media (max-width: 576px){.ins-toast-container{left:50%;right:auto;bottom:1rem;transform:translateX(-50%);max-width:92vw}}
        .ins-toast{pointer-events:auto;display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0.75rem;border-radius:0.5rem;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.12);overflow:hidden;transform-origin:right center;transition:opacity .18s ease,transform .18s ease}
        .ins-toast .ins-body{flex:1;font-size:0.95rem}
        .ins-toast .ins-close{background:transparent;border:0;color:inherit;opacity:0.85;cursor:pointer}
        .ins-toast.info{background:linear-gradient(90deg,#0d6efd,#6f42c1)}
        .ins-toast.success{background:linear-gradient(90deg,#198754,#20c997)}
        .ins-toast.danger{background:linear-gradient(90deg,#dc3545,#e55353)}
        .ins-toast.warning{background:linear-gradient(90deg,#fd7e14,#ffc107)}
        .ins-toast .ins-progress{height:3px;background:rgba(255,255,255,0.85);width:100%;transform-origin:left center}
        `,a=document.createElement("style");a.id="ins-toast-styles",a.textContent=r,document.head.appendChild(a)}function o(){return e||(e=document.createElement("div"),e.className="ins-toast-container",document.body.appendChild(e),e)}function i(r){!r||!r.parentNode||(r.style.opacity="0",r.style.transform="translateY(8px)",r._timer&&(clearTimeout(r._timer),delete r._timer),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},$.ANIMATION_DURATION))}function s(r,a="info",c={}){if(!r)return null;n();const p=o(),l=c.delay||t,b=c.autoHide!==!1,d=document.createElement("div");d.className=`ins-toast ${a}`,d.setAttribute("role","status"),d.setAttribute("aria-live","polite"),d.innerHTML=`
            <div class="ins-body"></div>
            <button type="button" class="ins-close" aria-label="Close">&times;</button>
            <div class="ins-progress"></div>
        `;const m=d.querySelector(".ins-close"),f=d.querySelector(".ins-body"),u=d.querySelector(".ins-progress");return f&&(f.textContent=String(r)),m.addEventListener("click",()=>i(d)),p.appendChild(d),requestAnimationFrame(()=>{d.style.opacity="1",d.style.transform="translateY(0)"}),u&&b&&(u.style.width="100%",u.style.transition=`width ${l}ms linear`,requestAnimationFrame(()=>{u.style.width="0%"})),b?d._timer=setTimeout(()=>i(d),l):u&&(u.style.opacity="0.48"),d}return{show:s,hide:i}}();window.Toast||(window.Toast=S);window.SwalUtil=K;const w={getCSRFToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},stripHtml(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},removeHtmlTags(e){return e?e.replace(/<[^>]*>/g,""):""},formatDate(e,t={}){if(!e)return"";const n=new Date(e),o=t.locale||"en-US",i=t.format||{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return n.toLocaleString(o,i)},safeJsonParse(e,t=null){try{return JSON.parse(e)}catch{return t}},escapeHtml(e){return(e==null?"":String(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},truncateWords(e,t=10){const n=e==null?"":String(e),o=n.trim().split(/\s+/).filter(Boolean);return o.length<=t?n.trim():`${o.slice(0,t).join(" ")}...`},getCssVar(e){const t=e.startsWith("--")?e:`--${e}`;return getComputedStyle(document.documentElement).getPropertyValue(t).trim()},colors:{get primary(){return w.getCssVar("--ins-primary")||"#428177"},get secondary(){return w.getCssVar("--ins-secondary")||"#054239"},get success(){return w.getCssVar("--ins-success")||"#22c55e"},get danger(){return w.getCssVar("--ins-danger")||"#ef4444"},get warning(){return w.getCssVar("--ins-warning")||"#eab308"},get info(){return w.getCssVar("--ins-info")||"#06b6d4"},get indigo(){return w.getCssVar("--ins-indigo")||"#6366f1"},get blue(){return w.getCssVar("--ins-blue")||"#3b82f6"},get teal(){return w.getCssVar("--ins-teal")||"#14b8a6"},get bodyColor(){return w.getCssVar("--ins-body-color")||"#374151"},get bodyBg(){return w.getCssVar("--ins-body-bg")||"#f9f9f9"},get white(){return w.getCssVar("--ins-white")||"#fff"},get black(){return w.getCssVar("--ins-black")||"#030712"},social:{get facebook(){return w.getCssVar("--ins-social-facebook")||"#1877F2"},get facebookGreen(){return w.getCssVar("--ins-social-facebook-green")||"#42B72A"},get facebookText(){return w.getCssVar("--ins-social-facebook-text")||"#050505"},get facebookSecondary(){return w.getCssVar("--ins-social-facebook-secondary")||"#65676B"},get facebookReaction(){return w.getCssVar("--ins-social-facebook-reaction")||"#F0284A"},get twitter(){return w.getCssVar("--ins-social-twitter")||"#1DA1F2"},get twitterBlue(){return w.getCssVar("--ins-social-twitter-blue")||"#1D9BF0"},get twitterBg(){return w.getCssVar("--ins-social-twitter-bg")||"#000000"},get twitterBorder(){return w.getCssVar("--ins-social-twitter-border")||"#2F3336"},get twitterText(){return w.getCssVar("--ins-social-twitter-text")||"#E7E9EA"},get twitterSecondary(){return w.getCssVar("--ins-social-twitter-secondary")||"#71767B"},get linkedin(){return w.getCssVar("--ins-social-linkedin")||"#0A66C2"},get linkedinDark(){return w.getCssVar("--ins-social-linkedin-dark")||"#004182"},get linkedinBg(){return w.getCssVar("--ins-social-linkedin-bg")||"#F4F2EE"},get linkedinReaction(){return w.getCssVar("--ins-social-linkedin-reaction")||"#E16745"},get linkedinCelebrate(){return w.getCssVar("--ins-social-linkedin-celebrate")||"#6DAE4F"},get instagram(){return w.getCssVar("--ins-social-instagram")||"#E4405F"},get instagramBlue(){return w.getCssVar("--ins-social-instagram-blue")||"#0095F6"},get instagramSecondary(){return w.getCssVar("--ins-social-instagram-secondary")||"#A8A8A8"},get instagramBorder(){return w.getCssVar("--ins-social-instagram-border")||"#262626"},get instagramLink(){return w.getCssVar("--ins-social-instagram-link")||"#E0F1FF"},get tiktokCyan(){return w.getCssVar("--ins-social-tiktok-cyan")||"#25F4EE"},get tiktokPink(){return w.getCssVar("--ins-social-tiktok-pink")||"#FE2C55"},get tiktokBlue(){return w.getCssVar("--ins-social-tiktok-blue")||"#20D5EC"}}}},L={fillForm(e,t){if(!e||!t||typeof t!="object")return;const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;Object.keys(t).forEach(i=>{const s=n.querySelector(`[name="${i}"]`);if(s)switch(s.type){case"checkbox":s.checked=!!t[i];break;case"radio":const r=n.querySelector(`[name="${i}"][value="${t[i]}"]`);r&&(r.checked=!0);break;default:s.value=t[i]||""}}),Object.entries({id:"editConfigTitleId",key:"key",page:"page",title:"title",description:"description",created_at:"created_at",updated_at:"updated_at"}).forEach(([i,s])=>{const r=n.querySelector(`#${s}`);r&&t[i]!==void 0&&(i.endsWith("_at")?r.value=w.formatDate(t[i]):r.value=t[i]||"")})},clearFormErrors(e){if(!e)return;const t=typeof e=="string"?document.querySelector(e):e;if(!t)return;[".is-invalid",".is-valid",".invalid-feedback",".valid-feedback"].forEach(o=>{t.querySelectorAll(o).forEach(i=>{o.startsWith(".is-")?i.classList.remove(o.substring(1)):i.remove()})}),t.querySelectorAll(".text-danger.error-message").forEach(o=>o.remove()),t.classList.remove("was-validated")},resetForm(e){e&&(e.reset(),this.clearFormErrors(e))},displayFormErrors(e,t){if(!e||!t||typeof t!="object")return;e.classList.add("was-validated");let n=null;Object.entries(t).forEach(([o,i])=>{const s=e.querySelector(`[name="${o}"]`)||e.querySelector(`#${o}`);if(!s)return;s.classList.add("is-invalid"),s.classList.remove("is-valid");const r=s.parentNode.querySelector(".invalid-feedback");r&&r.remove();const a=document.createElement("div");a.className="invalid-feedback d-block";const c=document.createElement("i");c.className="bi bi-exclamation-circle me-1";const p=document.createTextNode(Array.isArray(i)?i[0]:String(i));a.appendChild(c),a.appendChild(p),s.parentNode.appendChild(a),n||(n=s)}),n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}))},showDuplicateConfirmation(e,t){const o=(window.i18n||{}).messages||{};document.documentElement.dir==="rtl"||document.documentElement.lang;let i="";t.duplicates&&t.duplicates.length>0&&(i=t.duplicates.map(l=>{const d={name:o.duplicate_match_name||"Name match",phone:o.duplicate_match_phone||"Phone match",email:o.duplicate_match_email||"Email match"}[l.match_type]||l.match_type,m=Math.round((l.confidence||0)*100);return`
                    <div class="card mb-2 border-warning">
                        <div class="card-body py-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>${w.escapeHtml(l.name)}</strong>
                                    <br><small class="text-muted">#${w.escapeHtml(l.file_number)}</small>
                                    ${l.phone?`<br><small class="text-muted">${w.escapeHtml(l.phone)}</small>`:""}
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-warning text-dark">${d}</span>
                                    <br><small class="text-muted">${o.duplicate_confidence||"Confidence"}: ${m}%</small>
                                </div>
                            </div>
                            <div class="mt-2">
                                <a href="${window.location.origin}${window.location.pathname.replace("/create","")}/${l.id}" 
                                   class="btn btn-sm btn-outline-primary" target="_blank">
                                    <i class="fas fa-eye me-1"></i>${o.view_existing||"View Existing"}
                                </a>
                            </div>
                        </div>
                    </div>
                `}).join(""));const s="duplicateConfirmModal";let r=document.getElementById(s);r&&r.remove();const a=`
            <div class="modal fade" id="${s}" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header bg-warning-subtle">
                            <h5 class="modal-title">
                                <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                ${o.duplicate_warning||"Potential Duplicate Patient"}
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p class="mb-3">${w.escapeHtml(t.message)}</p>
                            <div class="duplicate-list">
                                ${i}
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i>${o.cancel||"Cancel"}
                            </button>
                            <button type="button" class="btn btn-primary" id="confirmDuplicateBtn">
                                <i class="fas fa-plus me-1"></i>${o.create_anyway||"Create New Patient Anyway"}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;document.body.insertAdjacentHTML("beforeend",a),r=document.getElementById(s);let c;if(window.bootstrap&&window.bootstrap.Modal)c=new window.bootstrap.Modal(r),c.show();else{r.classList.add("show"),r.style.display="block",document.body.classList.add("modal-open");const l=document.createElement("div");l.className="modal-backdrop fade show",document.body.appendChild(l)}document.getElementById("confirmDuplicateBtn").addEventListener("click",async()=>{let l=e.querySelector('input[name="confirm_duplicate"]');if(l||(l=document.createElement("input"),l.type="hidden",l.name="confirm_duplicate",e.appendChild(l)),l.value="1",c)c.hide();else{r.classList.remove("show"),r.style.display="none",document.body.classList.remove("modal-open");const d=document.querySelector(".modal-backdrop");d&&d.remove()}const b=new Event("submit",{bubbles:!0,cancelable:!0});e.dispatchEvent(b)}),r.addEventListener("hidden.bs.modal",()=>{r.remove()})},async handleFormSubmit(e,t){if(!e||!t)return;e.preventDefault(),this.clearFormErrors(t);const n=t.closest(".modal");let o=t.querySelector('button[type="submit"]');!o&&n&&(o=n.querySelector(".modal-footer .btn-primary")||n.querySelector('.modal-footer button[type="button"]:not(.btn-secondary)')||n.querySelector('button[type="submit"]')),o||(o=t.querySelector(".btn-primary"));const i=o?.innerHTML||"",s=o?.disabled||!1;if(o){o.disabled=!0;const a=window.i18n&&window.i18n.messages&&window.i18n.messages.processing?window.i18n.messages.processing:"";o.innerHTML='<i class="bi bi-hourglass-split"></i> '+a}const r=()=>{o&&(o.disabled=s,o.innerHTML=i)};try{const a=new FormData(t),c=t.action||window.location.href,p={"X-CSRF-TOKEN":w.getCSRFToken(),Accept:"application/json","X-Requested-With":"XMLHttpRequest"};if(v&&v.siteKey){const u=a.get("g-recaptcha-response"),h=a.get("recaptcha_action");if(!u||!h){const g=v.deriveAction(t),y=await v.execute(g);y&&(a.set("g-recaptcha-response",y),a.set("recaptcha_action",g),p["X-Recaptcha-Token"]=y)}else p["X-Recaptcha-Token"]=String(u)}const l=new AbortController,b=setTimeout(()=>l.abort(),3e4),d=await fetch(c,{method:"POST",body:a,signal:l.signal,credentials:"same-origin",headers:p});clearTimeout(b);const m=(d.headers.get("content-type")||"").toLowerCase();let f=null;if(m.includes("application/json")){try{let h=await d.clone().text();h.charCodeAt(0)===65279&&(h=h.slice(1)),h=h.replace(/^\xEF\xBB\xBF/,"").trim(),f=JSON.parse(h)}catch{throw new Error(window.i18n?.messages?.invalid_server_response||"Invalid server response")}const u=f&&f.success===!1;if(d.ok&&!u){const h=f.message||window.i18n?.messages?.operation_completed_successfully||"";if(f.redirect){try{sessionStorage.setItem("toastMessage",JSON.stringify({message:h,type:"success"}))}catch{}setTimeout(()=>{const g=new URL(f.redirect,window.location.origin),y=new URL(window.location.href);y.hash="",g.href.replace(g.hash,"")===y.href&&g.hash?(window.location.hash=g.hash,window.location.reload()):window.location.assign(f.redirect)},10);return}r(),S.show(h,"success"),n&&P.hide(n),window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload()}else{if(f&&f.requires_confirmation&&f.duplicates){r(),this.showDuplicateConfirmation(t,f);return}if(f&&f.errors&&(r(),this.displayFormErrors(t,f.errors)),f&&f.redirect){f.message&&sessionStorage.setItem("toastMessage",JSON.stringify({message:f.message,type:d.status>=500?"danger":"warning"})),window.location.href=f.redirect;return}if(f&&f.message&&(r(),S.show(f.message,d.status>=500?"danger":"warning")),d.status===403){S.show(window.i18n?.messages?.not_authorized||"","warning"),setTimeout(()=>{window.location.href=Y},600);return}if(f&&(f.errors||f.message||f.redirect))return;r();const h=f&&(f.message||f.error)||window.i18n?.messages?.operation_failed||"";throw new Error(h)}}else{if(d.redirected){window.location.href=d.url;return}const u=await d.text();if(d.ok){if(u&&(u.includes("<!DOCTYPE html")||u.includes("<html"))){document.open(),document.write(u),document.close();return}window.location.reload();return}throw r(),new Error(window.i18n?.messages?.unexpected_response||"")}}catch(a){r(),a.name==="AbortError"?S.show(window.i18n?.messages?.request_timeout||"","danger"):S.show(a.message||window.i18n?.messages?.an_error_occurred||"","danger")}}};window.FormManager=L;const P={show(e){if(typeof e=="string"&&(e=document.getElementById(e)),!e)return;if(typeof bootstrap<"u"&&bootstrap.Modal){let o=bootstrap.Modal.getInstance(e);o||(o=new bootstrap.Modal(e)),o.show();return}e.style.display="block",e.classList.add("show","in"),e.classList.remove("out"),document.body.classList.add("modal-open");const t=document.createElement("div");t.className="modal-backdrop fade show",t.id=`modal-backdrop-${Date.now()}`,document.body.appendChild(t);const n=o=>{o.key==="Escape"&&(this.hide(e),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n),t.addEventListener("click",()=>this.hide(e)),e._cleanup=()=>{document.removeEventListener("keydown",n)},e.dispatchEvent(new Event("shown.bs.modal",{bubbles:!0}))},hide(e){if(typeof e=="string"&&(e=document.getElementById(e)),!!e){if(typeof bootstrap<"u"&&bootstrap.Modal){const t=bootstrap.Modal.getInstance(e);if(t){t.hide();return}}e.style.display="none",e.classList.remove("show","in"),e.classList.add("out"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove()),e._cleanup&&(e._cleanup(),delete e._cleanup)}}},E={currentDataTable:null,setCurrentDataTable(e){this.currentDataTable=e,window.currentDataTable=e},getCurrentDataTable(){return this.currentDataTable},initializeColumnVisibility(e=".dataTable",t=".column-toggle"){document.querySelector(e)&&(document.querySelectorAll(t).forEach(o=>{o.addEventListener("change",()=>{this.currentDataTable&&this.currentDataTable.column(parseInt(o.dataset.column)).visible(o.checked),this.updateColumnCount(t)})}),this.updateColumnCount(t))},toggleAllColumns(e,t=".column-toggle"){document.querySelectorAll(t).forEach(n=>{n.checked=e,this.currentDataTable&&this.currentDataTable.column(parseInt(n.dataset.column)).visible(e)}),this.updateColumnCount(t)},updateColumnCount(e=".column-toggle",t="column-count"){const n=document.querySelectorAll(e),o=Array.from(n).filter(r=>r.checked).length,i=n.length,s=document.getElementById(t);s&&(s.textContent=`${o} of ${i} columns visible`)},exportTableToCSV(e=".dataTable",t="export.csv",n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const s=this.extractTableData(o,n).map(r=>r.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")).join(`
`);this.downloadFile(s,t,"text/csv;charset=utf-8;"),S.show(window.i18n?.messages?.table_export_success||"","success")},copyTableToClipboard(e=".dataTable",t=!0){const n=document.querySelector(e);if(!n){console.error("Table not found");return}const i=this.extractTableData(n,t).map(s=>s.join("	")).join(`
`);navigator.clipboard.writeText(i).then(()=>{S.show(window.i18n?.messages?.table_copy_success||"","success")}).catch(s=>{console.error("Failed to copy to clipboard:",s),S.show(window.i18n?.messages?.table_copy_failed||"","danger")})},printTable(e=".dataTable",t=null,n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const i=t||window.i18n?.messages?.data_export||"",s=window.i18n?.messages?.generated_on||"",r=this.extractTableData(o,n),a=this.generatePrintableTable(r),c=window.open("","_blank");c.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>${i}</title>
                <meta charset="utf-8">
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; font-weight: bold; }
                    tr:nth-child(even) { background-color: #f9f9f9; }
                    tr:hover { background-color: #f5f5f5; }
                    @media print {
                        .no-print { display: none; }
                        body { margin: 0; }
                        table { page-break-inside: auto; }
                        tr { page-break-inside: avoid; page-break-after: auto; }
                        th { page-break-after: avoid; }
                    }
                    @page { margin: 1cm; }
                </style>
            </head>
            <body>
                <h2>${i}</h2>
                <p style="color: #666; font-size: 12px; margin-bottom: 20px;">
                    ${s} ${new Date().toLocaleString()}
                </p>
                ${a}
            </body>
            </html>
        `),c.document.close(),c.focus(),setTimeout(()=>{c.print()},$.PRINT_DELAY),S.show(window.i18n?.messages?.print_dialog_opened||"","info")},extractTableData(e,t){const n=[],o=[];return e.querySelectorAll("thead th").forEach((r,a)=>{(!t||!this.currentDataTable||this.currentDataTable.column(a).visible())&&o.push(w.stripHtml(r.textContent.trim()))}),n.push(o),e.querySelectorAll("tbody tr").forEach(r=>{const a=[];r.querySelectorAll("td").forEach((p,l)=>{(!t||!this.currentDataTable||this.currentDataTable.column(l).visible())&&a.push(w.stripHtml(p.textContent.trim()))}),a.length>0&&n.push(a)}),n},generatePrintableTable(e){if(!e.length)return`<p>${window.i18n?.messages?.no_data_to_display||""}</p>`;const[t,...n]=e,o=t.map(s=>`<th>${s}</th>`).join(""),i=n.map(s=>`<tr>${s.map(r=>`<td>${r}</td>`).join("")}</tr>`).join("");return`
            <table>
                <thead><tr>${o}</tr></thead>
                <tbody>${i}</tbody>
            </table>
        `},downloadFile(e,t,n){const o=new Blob([e],{type:n}),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}},D={initializeDropdownBehavior(e=".dropdown-menu"){document.querySelectorAll(e).forEach(t=>{t.addEventListener("click",n=>{t.querySelector(".column-toggle")&&n.stopPropagation()})})},bindPasswordToggle(e=null,t=null){if(e&&t){const r=document.querySelector(e),a=document.querySelector(t);r&&a&&this.setupPasswordToggle(r,a);return}const n=document.querySelectorAll(".input-group");let o=!1;if(n.forEach(r=>{const a=r.querySelector("input[type='password']"),c=r.querySelector("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");a&&c&&(this.setupPasswordToggle(c,a),o=!0)}),o)return;const i=document.querySelectorAll("input[type='password']"),s=document.querySelectorAll("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");!s.length||!i.length||(i.length===1&&s.length===1?this.setupPasswordToggle(s[0],i[0]):i.forEach((r,a)=>{const c=s[a];c&&this.setupPasswordToggle(c,r)}))},setupPasswordToggle(e,t){e.__passwordToggleBound||(e.__passwordToggleBound=!0,e.addEventListener("click",()=>{const n=t.type==="password";t.type=n?"text":"password",typeof e.innerHTML<"u"&&(e.innerHTML=n?'<i class="bi bi-eye-slash"></i>':'<i class="bi bi-eye"></i>')}))}},C={async deleteItem(e,t={}){const{onSuccess:n,onError:o,successMessage:i=window.i18n?.toasts?.delete_success||"",errorMessage:s=window.i18n?.toasts?.delete_failed||"",headers:r={},redirectOnSuccess:a=!1,redirectUrl:c=null}=t;if(!e)return console.error("deleteItem: resourceUrl is required"),!1;try{const p=Object.assign({"X-CSRF-TOKEN":w.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r);if(v&&v.siteKey){const u=v.deriveActionFromUrl(e,"delete"),h=await v.execute(u);h&&(p["X-Recaptcha-Token"]=h)}const l=await fetch(e,{method:"DELETE",credentials:"same-origin",headers:p});let b=null;const d=(l.headers.get("content-type")||"").toLowerCase(),m=l.redirected===!0,f=l.url||null;if(d.includes("application/json"))try{b=await l.json()}catch{}if(l.ok){const u=y=>{if(y)try{sessionStorage.setItem("toastMessage",JSON.stringify({message:y,type:"success"}))}catch{}},h=(y,A)=>{u(A);try{const _=new URL(y,window.location.origin),q=new URL(window.location.href);if(_.hash&&_.origin===q.origin&&_.pathname===q.pathname){window.location.hash=_.hash,window.location.reload();return}}catch{}window.location.href=y},g=b&&b.message||i;if(m&&f)return h(f,g),!0;if(b&&b.redirect)return h(b.redirect,g),!0;if(a&&c)return h(c,g),!0;if(S.show(b&&b.message||i,"success"),typeof n=="function")try{n(b)}catch(y){console.warn("onSuccess error:",y)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const u=new Error(b&&b.message||s);if(typeof o=="function")try{o(u,l)}catch(h){console.warn("onError error:",h)}return S.show(u.message,"danger"),!1}}catch(p){if(console.error("deleteItem error:",p),S.show(p.message||s,"danger"),typeof o=="function")try{o(p)}catch(l){console.warn("onError error:",l)}return!1}},async confirmDelete(e,t=null,n=null,o=null){const i=document.getElementById("confirmModal"),s=document.getElementById("confirmMessage"),r=document.getElementById("confirmDeleteBtn");if(i&&s&&r){s.textContent=(n.confirm.message||"").replace(":item",o);const a=r.cloneNode(!0);r.parentNode.replaceChild(a,r),a.addEventListener("click",function(){hideModal(i),window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(i)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")},async activationStatus(e,t={}){const{onSuccess:n,onError:o,successMessage:i=window.i18n?.toasts?.activate_success||"",errorMessage:s=window.i18n?.toasts?.activate_failed||"",headers:r={},action:a=null,redirectOnSuccess:c=!1,redirectUrl:p=null}=t;if(!e)return console.error("activationStatus: resourceUrl is required"),!1;if(!a)return console.error("activationStatus: action is required (activate|deactivate)"),!1;try{const l=Object.assign({"X-CSRF-TOKEN":w.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r),b={action:a};if(v&&v.siteKey){const g=v.deriveActionFromUrl(e,"post"),y=await v.execute(g);y&&(l["X-Recaptcha-Token"]=y,b["g-recaptcha-response"]=y,b.recaptcha_action=g)}const d=await fetch(e,{method:"POST",credentials:"same-origin",headers:l,body:JSON.stringify(b)});let m=null;const f=(d.headers.get("content-type")||"").toLowerCase(),u=d.redirected===!0,h=d.url||null;if(f.includes("application/json"))try{m=await d.json()}catch{}if(d.ok){if(u&&h)return window.location.href=h,!0;if(m&&m.redirect)return window.location.href=m.redirect,!0;if(c&&p)return window.location.href=p,!0;if(S.show(m&&m.message||i,"success"),typeof n=="function")try{n(m)}catch(g){console.warn("onSuccess error:",g)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const g=new Error(m&&m.message||s);if(typeof o=="function")try{o(g,d)}catch(y){console.warn("onError error:",y)}return S.show(g.message,"danger"),!1}}catch(l){if(console.error("activationStatus error:",l),S.show(l.message||s,"danger"),typeof o=="function")try{o(l)}catch(b){console.warn("onError error:",b)}return!1}},async requestJson(e,t={}){const{method:n="POST",data:o=null,headers:i={},onSuccess:s,onError:r,successMessage:a=window.i18n?.messages?.operation_completed_successfully||"",errorMessage:c=window.i18n?.messages?.operation_failed||"",redirectOnSuccess:p=!1,redirectUrl:l=null,showSuccessToast:b=!0,showErrorToast:d=!0}=t;if(!e)return console.error("requestJson: resourceUrl is required"),!1;try{const m=String(n||"POST").toUpperCase(),f=Object.assign({"X-CSRF-TOKEN":w.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},i);let u=o===null||typeof o>"u"?null:o;if(v&&v.siteKey&&["POST","PUT","PATCH","DELETE"].includes(m)){const T=v.deriveActionFromUrl(e,m.toLowerCase()),O=await v.execute(T);O&&(f["X-Recaptcha-Token"]=O,u&&typeof u=="object"&&(u=Object.assign({},u,{"g-recaptcha-response":O,recaptcha_action:T})))}const h=await fetch(e,{method:m,credentials:"same-origin",headers:f,body:u===null?null:JSON.stringify(u)});let g=null;const y=(h.headers.get("content-type")||"").toLowerCase(),A=h.redirected===!0,_=h.url||null;if(y.includes("application/json"))try{g=await h.json()}catch{}const q=g&&g.success===!1;if(h.ok&&!q){if(A&&_)return window.location.href=_,!0;if(g&&g.redirect)return window.location.href=g.redirect,!0;if(p&&l)return window.location.href=l,!0;if(b&&S.show(g&&g.message||a,"success"),typeof s=="function")try{s(g,h)}catch(T){console.warn("onSuccess error:",T)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}const F=new Error(g&&(g.message||g.error)||c);if(typeof r=="function")try{r(F,h,g)}catch(T){console.warn("onError error:",T)}return d&&S.show(F.message,h.status>=500?"danger":"warning"),!1}catch(m){if(console.error("requestJson error:",m),typeof r=="function")try{r(m)}catch(f){console.warn("onError error:",f)}return d&&S.show(m.message||c,"danger"),!1}},bindSelectJsonUpdate(e={}){const{selector:t="[data-update-url]",urlAttr:n="data-update-url",method:o="PUT",valueKey:i="status",prevValueDatasetKey:s="prevValue",disableDuringRequest:r=!0,idAttr:a=null,badgeAttr:c=null,renderBadge:p=null,successMessage:l=window.i18n?.toasts?.status_updated||window.i18n?.messages?.operation_completed_successfully||"",errorMessage:b=window.i18n?.toasts?.status_update_failed||window.i18n?.messages?.operation_failed||"",showSuccessToast:d=!0,showErrorToast:m=!0,buildData:f=null,onSuccess:u=null,onError:h=null}=e;document.querySelectorAll(t).forEach(g=>{!g||g.tagName!=="SELECT"||g.__crudSelectJsonUpdateBound||(g.__crudSelectJsonUpdateBound=!0,g.dataset[s]=String(g.value||""),g.addEventListener("change",async function(){const y=this.getAttribute(n),A=String(this.value||""),_=String(this.dataset[s]||"");if(A===_)return;if(!y){this.value=_;return}const q=typeof f=="function"?f(this):{[i]:A},F=this.disabled;r&&(this.disabled=!0);let T=null;if(a&&c){const x=this.getAttribute(a);x&&(T=document.querySelector(`[${c}="${x}"]`))}await C.requestJson(y,{method:o,data:q,successMessage:l,errorMessage:b,showSuccessToast:d,showErrorToast:m,onSuccess:(x,I)=>{if(this.dataset[s]=A,T&&typeof p=="function")try{T.textContent=String(p(A,this,x,I)||"")}catch{}if(typeof u=="function")try{u(this,x,I)}catch(R){console.warn("onSuccess hook failed:",R)}},onError:(x,I,R)=>{if(typeof h=="function")try{h(this,x,I,R)}catch(re){console.warn("onError hook failed:",re)}}})||(this.value=_),r&&(this.disabled=F)}))})},bindStatusSelect(e={},t=null,n=null){if(typeof e=="string"){const o=e,i=typeof t=="function"?t:null,s=n||window.i18n||{};return this.bindSelectJsonUpdate({selector:o,urlAttr:"data-update-url",method:"PUT",valueKey:"status",idAttr:"data-status-id",badgeAttr:"data-status-badge",renderBadge:i,successMessage:s?.toasts?.status_updated||s?.messages?.operation_completed_successfully,errorMessage:s?.toasts?.status_update_failed||s?.messages?.operation_failed,showSuccessToast:!0,showErrorToast:!0})}return this.bindSelectJsonUpdate(e||{})},async confirmActivate(e,t=null,n=null){const o=document.getElementById("confirmActivateModal"),i=document.getElementById("confirmActivateMessage"),s=document.getElementById("confirmActivateBtn");if(o&&i&&s){i.textContent=(n.confirm.message||"").replace(":item",e.title||e.key);const r=s.cloneNode(!0);s.parentNode.replaceChild(r,s),r.addEventListener("click",function(){hideModal(o),window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(o)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")}};Object.assign(window,{Toast:S,showToast:(e,t,n)=>S.show(e,t,n),fillForm:L.fillForm.bind(L),clearFormErrors:L.clearFormErrors.bind(L),resetForm:L.resetForm.bind(L),displayFormErrors:L.displayFormErrors.bind(L),handleFormSubmit:L.handleFormSubmit.bind(L),showModal:P.show.bind(P),hideModal:P.hide.bind(P),initializeColumnVisibility:E.initializeColumnVisibility.bind(E),toggleAllColumns:E.toggleAllColumns.bind(E),updateColumnCount:E.updateColumnCount.bind(E),exportTableToCSV:E.exportTableToCSV.bind(E),copyTableToClipboard:E.copyTableToClipboard.bind(E),printTable:E.printTable.bind(E),setCurrentDataTable:E.setCurrentDataTable.bind(E),getCurrentDataTable:E.getCurrentDataTable.bind(E),initializeDropdownBehavior:D.initializeDropdownBehavior.bind(D),bindPasswordToggle:D.bindPasswordToggle.bind(D),Utils:w,SwalHelper:K,stripHtml:w.stripHtml,removeHtmlTags:w.removeHtmlTags,escapeHtml:w.escapeHtml,truncateWords:w.truncateWords,safeJsonParse:w.safeJsonParse,getCSRFToken:w.getCSRFToken,deleteItem:C.deleteItem.bind(C),confirmDelete:C.confirmDelete?C.confirmDelete.bind(C):void 0,activationStatus:C.activationStatus.bind(C),requestJson:C.requestJson.bind(C),bindSelectJsonUpdate:C.bindSelectJsonUpdate.bind(C),bindStatusSelect:C.bindStatusSelect.bind(C)});window.confirmActivate=function(e={},t=null,n=null){let o={};if(e&&(e.itemLabel||e.resourceUrl||e.action||e.message||e.confirmText))o=Object.assign({},e);else{const a=e||{},c=n||window.i18n||{};o={itemLabel:a.title||a.key||a.full_name||a.name||"",resourceUrl:t||a.url||"",action:typeof a.active<"u"&&a.active?"deactivate":"activate",confirmText:null,confirmClass:null,message:c.confirm&&c.confirm.message?c.confirm.message:null,successMessage:c.toasts?.activate_success||null,errorMessage:c.toasts?.activate_failed||null,onSuccess:null,onError:null,redirectOnSuccess:!1,redirectUrl:null}}const i=document.getElementById("confirmActivateModal"),s=document.getElementById("confirmActivateMessage"),r=document.getElementById("confirmActivateBtn");if(!o.resourceUrl){console.error("confirmActivate: resourceUrl is required");return}if(i&&s&&r){const a=o.message||window.i18n?.confirm?.activate_message||window.i18n?.confirm?.message||"";s.textContent=a.replace(":item",o.itemLabel||"");const c=r.cloneNode(!0);o.confirmText&&(c.textContent=o.confirmText),o.confirmClass&&(c.className=o.confirmClass),r.parentNode.replaceChild(c,r),c.addEventListener("click",function(){try{hideModal(i)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(i)?.hide()}catch{}}window.activationStatus(o.resourceUrl,{action:o.action,successMessage:o.successMessage,errorMessage:o.errorMessage,onSuccess:o.onSuccess,onError:o.onError,redirectOnSuccess:o.redirectOnSuccess,redirectUrl:o.redirectUrl})});try{showModal(i)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(i)?.show()}catch{}}}else window.activationStatus(o.resourceUrl,{action:o.action,successMessage:o.successMessage,errorMessage:o.errorMessage,onSuccess:o.onSuccess,onError:o.onError,redirectOnSuccess:o.redirectOnSuccess,redirectUrl:o.redirectUrl})};window.clearForm||(window.clearForm=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&(t.querySelectorAll("input.form-control, textarea.form-control").forEach(n=>{n.type==="checkbox"||n.type==="radio"?n.checked=!1:n.value=""}),t.querySelectorAll("select").forEach(n=>{Array.from(n.options).forEach(o=>{o.selected=!1}),n._choices&&n._choices.removeActiveItems(),n.dispatchEvent(new Event("change",{bubbles:!0}))}))});window.clearErrors||(window.clearErrors=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&t.querySelectorAll(".error").forEach(n=>n.remove())});window.handleSubmit||(window.handleSubmit=function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;n&&(n.__handleSubmitBound||(n.__handleSubmitBound=!0,n.addEventListener("submit",async function(o){o.stopImmediatePropagation(),o.preventDefault();try{await window.FormManager.handleFormSubmit(o,n)}catch(i){console.error("handleSubmit error:",i),S.show(i?.message||window.i18n?.messages?.an_error_occurred||"","danger")}},!0)))});window.__recaptchaGlobalSubmitListenerAdded||(window.__recaptchaGlobalSubmitListenerAdded=!0,document.addEventListener("submit",async function(e){const t=e.target;if(!t||t.tagName!=="FORM"||t.__handleSubmitBound||t.dataset&&t.dataset.recaptchaSkip==="1"||t.dataset&&t.dataset.submitNative==="1"||t.__recaptchaSubmitInProgress)return;const n=String(t.getAttribute("method")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(n)){e.preventDefault(),t.__recaptchaSubmitInProgress=!0;try{await window.FormManager.handleFormSubmit(e,t)}catch(o){console.error("Global submit handler error:",o)}finally{t.__recaptchaSubmitInProgress=!1}}},!0));document.addEventListener("DOMContentLoaded",()=>{try{D.bindPasswordToggle(),D.initializeDropdownBehavior();const e=sessionStorage.getItem("toastMessage");if(e){try{const{message:t,type:n}=JSON.parse(e);t&&S.show(t,n||"info")}catch(t){console.warn("Failed to parse stored toast:",t)}sessionStorage.removeItem("toastMessage")}}catch(e){console.warn("Auto-initialization warning:",e)}});document.addEventListener("click",function(e){if(e.target.matches('[data-bs-dismiss="modal"]')||e.target.closest('[data-bs-dismiss="modal"]')){const t=e.target.closest(".modal");t&&hideModal(t)}});(function(){async function t(){if(!window.loadChoices)return;const n=await window.loadChoices();document.querySelectorAll("select.select2, select[data-choices]").forEach(i=>{if(i._choices)return;const s=window.i18n&&window.i18n.messages&&window.i18n.messages.select_an_option||null,r=i.getAttribute("data-placeholder")||i.getAttribute("placeholder")||null,a=s||r||(document.documentElement.lang==="ar"?"اختر خيارًا":window.i18n?.messages?.select_an_option||"Select an option");try{const c=new n(i,{removeItemButton:i.multiple,shouldSort:!1,placeholder:!0,placeholderValue:a,searchEnabled:!0});i._choices=c}catch(c){console.warn("Choices initialization skipped or failed:",c)}})}document.addEventListener("DOMContentLoaded",()=>{t().catch(()=>null),setTimeout(()=>{t().catch(()=>null)},400)})})();async function we(e,t=null,n={}){const{successText:o='<i class="bi bi-check me-1"></i>Copied!',successClass:i="btn-success",originalClass:s="btn-outline-secondary",timeout:r=2e3}=n;try{if(navigator.clipboard)await navigator.clipboard.writeText(e);else{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}if(t){const a=t.innerHTML;t.innerHTML=o,t.classList.add(i),t.classList.remove(s),setTimeout(()=>{t.innerHTML=a,t.classList.remove(i),t.classList.add(s)},r)}return!0}catch(a){return console.error("Copy failed:",a),!1}}Object.assign(window,{copyToClipboard:we});window.ApiClient={getToken:function(){return document.querySelector('meta[name="csrf-token"]')?.content||""},buildOptions:function(e,t,n={}){const o=t instanceof FormData,i={"X-CSRF-TOKEN":this.getToken(),Accept:"application/json",...n};!o&&t&&(i["Content-Type"]="application/json");const s={method:e,headers:i};return t&&(s.body=o?t:JSON.stringify(t)),s},get:async function(e,t={}){const n=new URLSearchParams(t).toString(),o=n?`${e}?${n}`:e;return(await fetch(o,this.buildOptions("GET",null))).json()},getHtml:async function(e){return(await fetch(e,{method:"GET",headers:{"X-CSRF-TOKEN":this.getToken(),"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}})).text()},post:async function(e,t={}){return(await fetch(e,this.buildOptions("POST",t))).json()},put:async function(e,t={}){return(await fetch(e,this.buildOptions("PUT",t))).json()},delete:async function(e,t={}){return(await fetch(e,this.buildOptions("DELETE",t))).json()},request:async function(e,t={}){const{method:n="POST",data:o={},loadingText:i="Processing...",showLoading:s=!0,onSuccess:r,onError:a,onFinally:c}=t;s&&typeof Swal<"u"&&Swal.fire({title:i,allowOutsideClick:!1,didOpen:()=>Swal.showLoading()});try{const l=await(await fetch(e,this.buildOptions(n,o))).json();return s&&typeof Swal<"u"&&Swal.close(),l.success?r&&r(l):a?a(l):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:l.message||window.i18n?.messages?.operation_failed||"Operation failed"}),l}catch(p){throw console.error("ApiClient Error:",p),s&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.connection_failed||"Connection failed. Please try again."}),a&&a({success:!1,message:p.message}),p}finally{c&&c()}},submitForm:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;const o=new FormData(n),i=n.action||window.location.href,s=n.method?.toUpperCase()||"POST";return this.request(i,{method:s,data:o,...t})}};window.FormHelper={bind:function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;!n||n.__formHelperBound||(n.__formHelperBound=!0,n.addEventListener("submit",async o=>{o.preventDefault(),await this.submit(n,t)}))},submit:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return null;const{onSuccess:o,onError:i,onBefore:s,onComplete:r,loadingText:a="Processing...",resetOnSuccess:c=!1,closeModalOnSuccess:p=!0}=t,l=n.querySelector('button[type="submit"], .btn-primary'),b=l?.innerHTML,d=n.closest(".modal");if(s&&s(n)===!1)return null;l&&(l.disabled=!0,l.innerHTML=`<i class="bi bi-hourglass-split me-1"></i>${a}`);try{const m=new FormData(n),f=n.action||window.location.href,u=await ApiClient.post(f,m);if(l&&(l.disabled=!1,l.innerHTML=b),u.success){if(c&&n.reset(),p&&d){const h=bootstrap.Modal.getInstance(d);h&&h.hide()}if(u.redirect)return window.location.href=u.redirect,u;o?o(u):u.message&&typeof Swal<"u"&&Swal.fire({icon:"success",title:u.message,toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1})}else i?i(u):u.errors?this.showErrors(n,u.errors):u.message&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:u.message});return r&&r(u),u}catch(m){return l&&(l.disabled=!1,l.innerHTML=b),i?i({success:!1,message:m.message}):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.check_connection||"Please check your connection"}),r&&r({success:!1,error:m}),null}},showErrors:function(e,t){this.clearErrors(e),Object.entries(t).forEach(([o,i])=>{const s=e.querySelector(`[name="${o}"], [name="${o}[]"]`);if(s){s.classList.add("is-invalid");const r=document.createElement("div");r.className="invalid-feedback d-block",r.textContent=Array.isArray(i)?i[0]:i,s.parentNode.appendChild(r)}});const n=e.querySelector(".is-invalid");n&&n.focus()},clearErrors:function(e){e&&(e.querySelectorAll(".is-invalid").forEach(t=>t.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(t=>t.remove()))},getData:function(e){const t=typeof e=="string"?document.querySelector(e):e;return t?Object.fromEntries(new FormData(t)):{}},setData:function(e,t){const n=typeof e=="string"?document.querySelector(e):e;!n||!t||Object.entries(t).forEach(([o,i])=>{const s=n.querySelector(`[name="${o}"]`);if(s)if(s.type==="checkbox")s.checked=!!i;else if(s.type==="radio"){const r=n.querySelector(`[name="${o}"][value="${i}"]`);r&&(r.checked=!0)}else s.value=i})},toggleFavorite:async function(e,t,n={}){const{removeCard:o=!0,onSuccess:i,successMessage:s,errorMessage:r}=n,a=e.closest(".col-lg-6, .col-md-6, .card"),c=e.querySelector("i"),p=c?.className;c&&(c.className="bi bi-hourglass-split fs-5"),e.disabled=!0;try{const l=await ApiClient.post(t);l.success?(o&&a&&(a.style.transition="opacity 0.3s, transform 0.3s",a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(()=>{a.remove(),document.querySelectorAll(".col-lg-6, .col-md-6").length===0&&location.reload()},300)),typeof Swal<"u"&&Swal.fire({icon:"success",title:s||l.message||window.i18n?.messages?.updated||"Updated!",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),i&&i(l)):(c&&(c.className=p),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:r||l.message||window.i18n?.messages?.error||"Error",toast:!0,position:"top-end",timer:3e3}))}catch{c&&(c.className=p),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",toast:!0,position:"top-end",timer:3e3})}},confirmDelete:async function(e,t={}){const{confirmTitle:n=window.i18n?.messages?.are_you_sure||"Are you sure?",confirmText:o=window.i18n?.messages?.action_cannot_be_undone||"This action cannot be undone.",confirmButton:i=window.i18n?.messages?.yes_delete||"Yes, Delete",onSuccess:s}=t;if(typeof Swal>"u"){if(!confirm(o))return}else if(!(await Swal.fire({icon:"warning",title:n,text:o,showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:i})).isConfirmed)return;try{const r=await ApiClient.delete(e);r.success?s?s(r):r.redirect?window.location.href=r.redirect:location.reload():typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:r.message})}catch{typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.please_try_again||"Please try again"})}}};window.formatDate=w.formatDate;window.initChoicesSelect=async function(e=".choices-select",t={}){if(typeof window.loadChoices!="function")return console.warn("Choices.js loader not available"),[];const n=await window.loadChoices(),o=[];let i;if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof NodeList)i=e;else if(e instanceof Element)i=[e];else return[];return i.forEach(s=>{if(s.dataset.choicesInitialized||!s||s.tagName!=="SELECT")return;const r={searchEnabled:s.options.length>5,itemSelectText:"",shouldSort:!1,allowHTML:!0,searchPlaceholderValue:window.i18n?.common?.search||"Search...",noResultsText:window.i18n?.common?.no_results||"No results found",noChoicesText:window.i18n?.common?.no_choices||"No choices available",removeItemButton:s.hasAttribute("multiple"),placeholder:!0,placeholderValue:s.getAttribute("placeholder")||""};try{const a=new n(s,{...r,...t});s.dataset.choicesInitialized="true",o.push(a)}catch(a){console.warn("Failed to initialize Choices on element:",s,a)}}),o};window.setChoicesSelectValue=async function(e,t,n={}){const o=document.getElementById(e);if(!o)return;const i=String(t);if(n[e])return n[e].setChoiceByValue(i);const s=o.closest(".choices");if(s){const r=s.parentNode;o.hidden=!1,o.removeAttribute("tabindex"),o.removeAttribute("data-choice"),o.classList.remove("choices__input"),r.insertBefore(o,s),s.remove(),delete o.dataset.choicesInitialized}o.value=i,window.initChoicesSelect&&await window.initChoicesSelect(o)};function ge(){const e=document.querySelectorAll(".choices-select:not([data-choices-initialized]), .select2:not([data-choices-initialized])"),t=Array.from(e).filter(n=>!n.closest(".modal"));t.length>0&&window.initChoicesSelect(t)}function he(){document.addEventListener("shown.bs.modal",function(e){const t=e.target;if(!t||!window.initChoicesSelect)return;const n=t.querySelectorAll(".choices-select:not([data-choices-initialized]), .select2:not([data-choices-initialized])");n.length>0&&window.initChoicesSelect(n)})}document.addEventListener("DOMContentLoaded",function(){console.log("✅ Hakim Clinics - JavaScript Utilities Loaded"),console.log("📦 Available Managers:",{SwalHelper:typeof window.SwalUtil<"u",ApiClient:typeof window.ApiClient<"u",FormHelper:typeof window.FormHelper<"u"}),ge(),he()});function be(){const e=k(()=>import("./swiper-DpKYHp1-.js"),__vite__mapDeps([0,1])),t=k(()=>import("./index-BvN21dhf.js"),__vite__mapDeps([2,1]));return Promise.all([e,t]).then(([n,o])=>{const i=n.default||n.Swiper||n,s={Navigation:o.Navigation,Pagination:o.Pagination,Autoplay:o.Autoplay,EffectFade:o.EffectFade,EffectCreative:o.EffectCreative,EffectCoverflow:o.EffectCoverflow,Thumbs:o.Thumbs};return{Swiper:i,modules:s}})}function ye(e,t){document.querySelectorAll('.swiper[data-swiper="category"]').forEach(n=>{const o=n.querySelector(".swiper-button-next"),i=n.querySelector(".swiper-button-prev"),s=n.querySelector(".swiper-pagination"),r=!!(o&&i),c=n.querySelectorAll(".swiper-slide").length>=3,p=[t.Pagination,t.Autoplay,t.EffectCoverflow];r&&p.push(t.Navigation),new e(n,{modules:p,loop:c,rewind:!c,watchOverflow:!0,speed:650,autoplay:{delay:3800,disableOnInteraction:!1},grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:6,stretch:0,depth:120,modifier:1,slideShadows:!0},centeredSlides:!1,slidesPerView:1,spaceBetween:20,breakpoints:{576:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:24},992:{slidesPerView:1,spaceBetween:28}},pagination:{el:s,clickable:!0},...r?{navigation:{nextEl:o,prevEl:i}}:{}})})}function Se(e,t){document.querySelectorAll(".product-gallery").forEach(n=>{const o=n.querySelector('.swiper[data-swiper="product"]'),i=n.querySelector('.swiper[data-swiper="product-thumbs"]');let s=null;if(i&&(s=new e(i,{modules:[t.Navigation],slidesPerView:5,spaceBetween:8,freeMode:!0,watchSlidesProgress:!0,breakpoints:{0:{slidesPerView:4},576:{slidesPerView:5}}})),o){const r=o.querySelector(".swiper-pagination");new e(o,{modules:[t.Pagination,t.EffectFade,t.Thumbs],loop:!0,speed:500,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:1,spaceBetween:8,pagination:{el:r,clickable:!0},thumbs:s?{swiper:s}:void 0})}})}function J(){document.querySelector(".swiper")&&be().then(({Swiper:t,modules:n})=>{ye(t,n),Se(t,n)}).catch(()=>{})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J();function H(){document.querySelectorAll('input[type="tel"], input#phone, input[name="phone"]').forEach(t=>{t.classList.contains("phone-initialized")||(t.classList.add("phone-initialized"),t.placeholder||(t.placeholder="09xxxxxxxx"))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",H):H();function ve(){H()}window.initPhoneInputs=H;window.reinitPhoneInputs=ve;window.bootstrap=ae;function M(e){let t=null;return()=>(t||(t=e().then(n=>n&&n.default?n.default:n)),t)}const Q=M(()=>k(()=>import("./index-BZ7OSNzo.js"),[])),Z=M(()=>k(()=>import("./choices-DNEFJAfy.js"),[])),ee=M(()=>k(()=>import("./sweetalert2.esm.all-Dx3EkU1z.js"),[])),te=M(()=>k(()=>import("./quill-ChYgufvi.js"),__vite__mapDeps([3,4]))),ne=M(()=>k(()=>import("./easymde-Ca5tH7jq.js").then(e=>e.e),__vite__mapDeps([5,4]))),oe=M(()=>k(()=>import("./jsvectormap.esm-Ba9GIb0h.js"),[]));window.DataTable=X;globalThis.DataTable=X;window.loadFlatpickr=Q;window.loadChoices=Z;window.loadSwal=ee;window.loadQuill=te;window.loadSimpleMDE=ne;window.loadJSVectorMap=oe;function B(e){let t=null;const n=()=>(t||(t=e()),t);return new Proxy({},{get(o,i){if(i!=="then")return(...s)=>n().then(r=>{const a=r[i];return typeof a=="function"?a.apply(r,s):a})}})}window.Swal=B(ee);window.flatpickr=(...e)=>Q().then(t=>t(...e));window.Choices=B(Z);window.Quill=B(te);window.SimpleMDE=B(ne);window.JSVectorMap=B(oe);
