const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/swiper-DpKYHp1-.js","assets/utils-D71RtZIR.js","assets/index-BvN21dhf.js","assets/quill-ChYgufvi.js","assets/vendor-CnHzkViu.js","assets/easymde-Ca5tH7jq.js"])))=>i.map(i=>d[i]);
import{r as se,a as ie,b as ae,D as W}from"./vendor-CnHzkViu.js";const ce="modulepreload",le=function(e){return"/build/"+e},z={},A=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){let c=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");s=c(n.map(m=>{if(m=le(m),m in z)return;z[m]=!0;const u=m.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":ce,u||(l.as="script"),l.crossOrigin="",l.href=m,a&&l.setAttribute("nonce",a),document.head.appendChild(l),u)return new Promise((g,f)=>{l.addEventListener("load",g),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return s.then(r=>{for(const a of r||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};se();ie();let J=!1;async function H(){if(J||!document.getElementById("contentChart"))return;const t=await A(()=>import("./auto-CcLMyVVA.js"),[]),n=t&&t.default?t.default:t;window.Chart=n,J=!0,window.chartsInitialized=!0,n.defaults&&(n.defaults.animation=n.defaults.animation||{},n.defaults.animation.duration=1e3,n.defaults.animation.easing="easeOutQuart",n.defaults.responsive=!0)}function de(){document.readyState==="complete"?H():window.addEventListener("load",H)}window.initializeCharts=H;de();document.addEventListener("DOMContentLoaded",function(){initializeCharts(),ue()});function ue(){const e=document.documentElement;window.innerWidth<992?e.setAttribute("data-sidenav-size","offcanvas"):e.setAttribute("data-sidenav-size","default"),$()}function K(){const e=document.documentElement;e.getAttribute("data-sidenav-size")==="collapse"?e.setAttribute("data-sidenav-size","default"):e.setAttribute("data-sidenav-size","collapse"),$(),typeof j=="function"&&j()}function $(){const e=document.documentElement,t=document.querySelector(".menu-collapse-box .button-collapse-toggle");if(!t)return;const n=t.querySelector("i"),o=t.querySelector("span"),s=e.getAttribute("data-sidenav-size")==="collapse",i=t.getAttribute("data-text-collapse")||(o&&o.textContent?o.textContent:""),r=t.getAttribute("data-text-expand")||i;if(n){const c=s?"bi bi-chevron-double-right":"bi bi-chevron-double-left";n.className!==c&&(n.className=c)}if(o){const c=s?r:i;o.textContent!==c&&(o.textContent=c)}const a=document.querySelector(".sidenav-menu");a&&(s?a.classList.add("force-collapse"):a.classList.remove("force-collapse"))}function G(){document.documentElement.classList.toggle("sidebar-enable"),typeof j=="function"&&j()}window.toggleSidebar=K;window.toggleMobileSidebar=G;document.addEventListener("click",function(e){const t=document.getElementById("sidenavMenu"),n=document.querySelector(".button-collapse-toggle.d-xl-none"),o=document.documentElement;window.innerWidth<992&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&o.classList.contains("sidebar-enable")&&o.classList.remove("sidebar-enable")});function fe(){const e=document.documentElement;window.innerWidth>=992?(e.classList.remove("sidebar-enable"),e.getAttribute("data-sidenav-size")==="offcanvas"&&e.setAttribute("data-sidenav-size","default")):e.getAttribute("data-sidenav-size")!=="offcanvas"&&e.setAttribute("data-sidenav-size","offcanvas"),$()}function me(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}}function j(){const e=document.documentElement;try{e&&e.getAttribute&&e.getAttribute("dir")==="rtl"&&(e.classList.add("ins-rtl-repaint"),setTimeout(()=>e.classList.remove("ins-rtl-repaint"),60))}catch{}}function ge(e,t){const n=document.getElementById("selected-language-image"),o=document.getElementById("selected-language-flag"),s=document.getElementById("selected-language-code");if(n&&(t?n.src=t:window.FLAG_URLS&&window.FLAG_URLS[e]&&(n.src=window.FLAG_URLS[e])),o){const i=[];o.classList.forEach(r=>{r.startsWith("fi-")&&i.push(r)}),i.forEach(r=>o.classList.remove(r)),o.classList.add(`fi-${e}`)}s&&(s.textContent=` ${e.toUpperCase()}`)}window.changeLanguage=ge;window.addEventListener("resize",me(fe,150));document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".menu-collapse-box .button-collapse-toggle");e&&(e.getAttribute("onclick")||e.addEventListener("click",function(n){K()}));const t=document.querySelector(".button-collapse-toggle.d-xl-none");t&&(t.getAttribute("onclick")||t.addEventListener("click",function(n){G()}))});document.addEventListener("DOMContentLoaded",function(){typeof initializeCharts=="function"&&initializeCharts();var e=document.querySelector(".topbar-link .bi-moon, .topbar-link .bi-moon-stars");e&&e.parentElement.addEventListener("click",function(){var t=document.documentElement,n=t.getAttribute("data-bs-theme");t.setAttribute("data-bs-theme",n==="dark"?"light":"dark")})});document.addEventListener("click",function(e){try{let i=function(r){return function a(c){if(!(c&&c.propertyName&&c.propertyName!=="max-height")){var m=r.closest(".card"),u=m&&m.classList.contains("card-collapse");u?(r.style.overflow="hidden",r.style.maxHeight="0px"):(r.style.overflow="",r.style.maxHeight=""),r.__cardAnimating=!1,r.removeEventListener("transitionend",a)}}};var t=e.target&&e.target.closest?e.target.closest(".card-action-item"):null;if(!t)return;var n=t.closest(".card");if(!n)return;var o=!n.classList.contains("card-collapse"),s=n.querySelectorAll(".card-body");s.forEach(function(r){r.__cardAnimating;var a=r.scrollHeight,c=i(r);r.__cardAnimating=!0,r.style.transition=r.style.transition||"max-height 0.28s ease",o?(r.style.maxHeight=a+"px",requestAnimationFrame(function(){r.style.overflow="hidden",r.style.maxHeight="0px"}),r.addEventListener("transitionend",c)):(r.style.overflow="hidden",r.style.maxHeight="0px",requestAnimationFrame(function(){r.style.maxHeight=r.scrollHeight+"px"}),r.addEventListener("transitionend",c))}),n.classList.toggle("card-collapse")}catch{}});document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)});try{document.querySelectorAll(".card.card-collapse").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.overflow="hidden",n.style.maxHeight="0px"})}),document.querySelectorAll(".card:not(.card-collapse)").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.maxHeight="",n.style.overflow=""})})}catch{}});const V={TOAST_DELAY:5e3,ANIMATION_DURATION:220,DEBOUNCE_DELAY:300,PRINT_DELAY:250},k={isAvailable(){return typeof Swal<"u"&&typeof Swal.fire=="function"},showLoading(e,t=""){return this.isAvailable()?Swal.fire({title:e||window.i18n?.messages?.processing||"Processing...",text:t,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>Swal.showLoading()}):null},success(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"success",title:e,text:t,timer:n.timer||2500,timerProgressBar:!0,...n}):(alert(e),Promise.resolve({isConfirmed:!0}))},error(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"error",title:e,text:t,confirmButtonText:window.i18n?.messages?.ok||"OK",...n}):(alert(e+(t?`
`+t:"")),Promise.resolve({isConfirmed:!0}))},confirm(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:n.icon||"warning",title:e,text:t,showCancelButton:!0,confirmButtonColor:n.confirmButtonColor||"#3085d6",cancelButtonColor:n.cancelButtonColor||"#d33",confirmButtonText:n.confirmButtonText||window.i18n?.messages?.confirm||"Confirm",cancelButtonText:n.cancelButtonText||window.i18n?.messages?.cancel||"Cancel",...n}):Promise.resolve({isConfirmed:confirm(e+(t?`
`+t:""))})},toast(e,t="success",n={}){return this.isAvailable()?Swal.fire({icon:t,title:e,toast:!0,position:n.position||"top-end",showConfirmButton:!1,timer:n.timer||2500,timerProgressBar:!0,...n}):(console.log(`[${t}] ${e}`),Promise.resolve())},close(){this.isAvailable()&&Swal.close()}},S=function(){const e=document.querySelector('meta[name="recaptcha-site-key"]')?.getAttribute("content")||"";let t=null,n=0;function o(){return!!e&&typeof window.grecaptcha<"u"&&typeof window.grecaptcha.execute=="function"}function s(l=2500){return e?o()?Promise.resolve(!0):n&&Date.now()<n?Promise.resolve(!1):t||(t=new Promise(g=>{const f=Date.now();try{if(!document.querySelector('script[src*="www.google.com/recaptcha/api.js"]')){const w=document.createElement("script");w.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(e)}`,w.async=!0,w.defer=!0,document.head.appendChild(w)}}catch{}const d=()=>{if(o())return g(!0);if(Date.now()-f>=l)return g(!1);setTimeout(d,80)};d()}).then(g=>(g||(n=Date.now()+3e4),g)).finally(()=>{o()||(t=null)}),t):Promise.resolve(!1)}function i(l){return String(l||"submit").trim().toLowerCase().replace(/-/g,"_").replace(/[^a-z_\/]/g,"_").replace(/_+/g,"_").replace(/\/+?/g,"/").replace(/^_+|_+$/g,"").replace(/\/_+/g,"/").replace(/_+\//g,"/").slice(0,80)||"submit"}function r(l){const f=String(l||"").split("?")[0].split("#")[0].split("/").filter(Boolean),d=[];for(let h=0;h<f.length;h++){const w=String(f[h]||"").trim();if(!w||h===0&&/^[a-z]{2}$/i.test(w)||/^\d+$/.test(w)||/^[0-9a-f]{8,}$/i.test(w))continue;let E=w.toLowerCase().replace(/-/g,"_").replace(/[^a-z_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");E&&d.push(E)}return d.join("/")}function a(l){if(!l)return"submit";const g=l.getAttribute("data-recaptcha-action");if(g)return i(g);if(l.id)return i("form_"+l.id);const f=l.action||window.location.pathname;try{const d=new URL(f,window.location.origin).pathname;return i(r(d))}catch{return"submit"}}function c(l,g="submit"){const f=String(g||"submit").trim().toLowerCase();try{const d=new URL(String(l||""),window.location.origin).pathname,h=r(d);return i(`${f}_${h||"submit"}`)}catch{return i(`${f}_submit`)}}async function m(l){if(!o()&&(!await s()||!o()))return null;const g=i(l);return await new Promise(f=>{try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:g}).then(d=>f(d)).catch(()=>f(null))})}catch{f(null)}})}function u(l){if(l){if(!l.querySelector('input[name="g-recaptcha-response"]')){const g=document.createElement("input");g.type="hidden",g.name="g-recaptcha-response",l.appendChild(g)}if(!l.querySelector('input[name="recaptcha_action"]')){const g=document.createElement("input");g.type="hidden",g.name="recaptcha_action",l.appendChild(g)}}}function y(l,g,f){u(l);const d=l.querySelector('input[name="g-recaptcha-response"]'),h=l.querySelector('input[name="recaptcha_action"]');d&&(d.value=g||""),h&&(h.value=i(f))}return{isAvailable:o,ensureLoaded:s,deriveAction:a,deriveActionFromUrl:c,execute:m,setOnForm:y,siteKey:e}}(),Y=document.querySelector('meta[name="login-url"]')?.getAttribute("content")||"/login";if(typeof window.fetch=="function"&&!window.__fetchSessionWrapped){const e=window.fetch.bind(window);window.fetch=async(t,n=void 0)=>{try{const s=String(n&&n.method||(t instanceof Request?t.method:"GET")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(s)&&S&&S.siteKey){const i=t instanceof Request?t.url:String(t||""),r=new URL(i,window.location.href);if(r.origin===window.location.origin){const a=n&&n.headers?n.headers:t instanceof Request?t.headers:void 0,c=new Headers(a||{});if(!c.has("X-Recaptcha-Token")){const m=S.deriveActionFromUrl(r.href,s.toLowerCase()),u=await S.execute(m);u&&(c.set("X-Recaptcha-Token",u),n=Object.assign({},n||{},{headers:c}))}}}}catch{}const o=await e(t,n);if(o&&(o.status===401||o.status===419)){try{b.show(window.i18n?.messages?.session_expired_redirecting||window.i18n?.messages?.session_expired||"","warning")}catch{}setTimeout(()=>{window.location.href=Y},500)}return o},window.__fetchSessionWrapped=!0}const b=function(){let e=null;const t=V.TOAST_DELAY;function n(){if(document.getElementById("ins-toast-styles"))return;const r=`
        .ins-toast-container{position:fixed;right:1rem;bottom:1rem;z-index:10850;display:flex;flex-direction:column;gap:0.5rem;max-width:360px;pointer-events:none}
        @media (max-width: 576px){.ins-toast-container{left:50%;right:auto;bottom:1rem;transform:translateX(-50%);max-width:92vw}}
        .ins-toast{pointer-events:auto;display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0.75rem;border-radius:0.5rem;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.12);overflow:hidden;transform-origin:right center;transition:opacity .18s ease,transform .18s ease}
        .ins-toast .ins-body{flex:1;font-size:0.95rem}
        .ins-toast .ins-close{background:transparent;border:0;color:inherit;opacity:0.85;cursor:pointer}
        .ins-toast.info{background:linear-gradient(90deg,#0d6efd,#6f42c1)}
        .ins-toast.success{background:linear-gradient(90deg,#198754,#20c997)}
        .ins-toast.danger{background:linear-gradient(90deg,#dc3545,#e55353)}
        .ins-toast.warning{background:linear-gradient(90deg,#fd7e14,#ffc107)}
        .ins-toast .ins-progress{height:3px;background:rgba(255,255,255,0.85);width:100%;transform-origin:left center}
        `,a=document.createElement("style");a.id="ins-toast-styles",a.textContent=r,document.head.appendChild(a)}function o(){return e||(e=document.createElement("div"),e.className="ins-toast-container",document.body.appendChild(e),e)}function s(r){!r||!r.parentNode||(r.style.opacity="0",r.style.transform="translateY(8px)",r._timer&&(clearTimeout(r._timer),delete r._timer),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},V.ANIMATION_DURATION))}function i(r,a="info",c={}){if(!r)return null;n();const m=o(),u=c.delay||t,y=c.autoHide!==!1,l=document.createElement("div");l.className=`ins-toast ${a}`,l.setAttribute("role","status"),l.setAttribute("aria-live","polite"),l.innerHTML=`
            <div class="ins-body"></div>
            <button type="button" class="ins-close" aria-label="Close">&times;</button>
            <div class="ins-progress"></div>
        `;const g=l.querySelector(".ins-close"),f=l.querySelector(".ins-body"),d=l.querySelector(".ins-progress");return f&&(f.textContent=String(r)),g.addEventListener("click",()=>s(l)),m.appendChild(l),requestAnimationFrame(()=>{l.style.opacity="1",l.style.transform="translateY(0)"}),d&&y&&(d.style.width="100%",d.style.transition=`width ${u}ms linear`,requestAnimationFrame(()=>{d.style.width="0%"})),y?l._timer=setTimeout(()=>s(l),u):d&&(d.style.opacity="0.48"),l}return{show:i,hide:s}}();window.Toast||(window.Toast=b);const p={debounce(e,t=V.DEBOUNCE_DELAY){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}},getCSRFToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},stripHtml(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},removeHtmlTags(e){return e?e.replace(/<[^>]*>/g,""):""},formatDate(e,t={}){if(!e)return"";const n=new Date(e),o=t.locale||"en-US",s=t.format||{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return n.toLocaleString(o,s)},safeJsonParse(e,t=null){try{return JSON.parse(e)}catch{return t}},escapeHtml(e){return(e==null?"":String(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},truncateWords(e,t=10){const n=e==null?"":String(e),o=n.trim().split(/\s+/).filter(Boolean);return o.length<=t?n.trim():`${o.slice(0,t).join(" ")}...`},getCssVar(e){const t=e.startsWith("--")?e:`--${e}`;return getComputedStyle(document.documentElement).getPropertyValue(t).trim()},colors:{get primary(){return p.getCssVar("--ins-primary")||"#428177"},get secondary(){return p.getCssVar("--ins-secondary")||"#054239"},get success(){return p.getCssVar("--ins-success")||"#22c55e"},get danger(){return p.getCssVar("--ins-danger")||"#ef4444"},get warning(){return p.getCssVar("--ins-warning")||"#eab308"},get info(){return p.getCssVar("--ins-info")||"#06b6d4"},get indigo(){return p.getCssVar("--ins-indigo")||"#6366f1"},get blue(){return p.getCssVar("--ins-blue")||"#3b82f6"},get teal(){return p.getCssVar("--ins-teal")||"#14b8a6"},get bodyColor(){return p.getCssVar("--ins-body-color")||"#374151"},get bodyBg(){return p.getCssVar("--ins-body-bg")||"#f9f9f9"},get white(){return p.getCssVar("--ins-white")||"#fff"},get black(){return p.getCssVar("--ins-black")||"#030712"},social:{get facebook(){return p.getCssVar("--ins-social-facebook")||"#1877F2"},get facebookGreen(){return p.getCssVar("--ins-social-facebook-green")||"#42B72A"},get facebookText(){return p.getCssVar("--ins-social-facebook-text")||"#050505"},get facebookSecondary(){return p.getCssVar("--ins-social-facebook-secondary")||"#65676B"},get facebookReaction(){return p.getCssVar("--ins-social-facebook-reaction")||"#F0284A"},get twitter(){return p.getCssVar("--ins-social-twitter")||"#1DA1F2"},get twitterBlue(){return p.getCssVar("--ins-social-twitter-blue")||"#1D9BF0"},get twitterBg(){return p.getCssVar("--ins-social-twitter-bg")||"#000000"},get twitterBorder(){return p.getCssVar("--ins-social-twitter-border")||"#2F3336"},get twitterText(){return p.getCssVar("--ins-social-twitter-text")||"#E7E9EA"},get twitterSecondary(){return p.getCssVar("--ins-social-twitter-secondary")||"#71767B"},get linkedin(){return p.getCssVar("--ins-social-linkedin")||"#0A66C2"},get linkedinDark(){return p.getCssVar("--ins-social-linkedin-dark")||"#004182"},get linkedinBg(){return p.getCssVar("--ins-social-linkedin-bg")||"#F4F2EE"},get linkedinReaction(){return p.getCssVar("--ins-social-linkedin-reaction")||"#E16745"},get linkedinCelebrate(){return p.getCssVar("--ins-social-linkedin-celebrate")||"#6DAE4F"},get instagram(){return p.getCssVar("--ins-social-instagram")||"#E4405F"},get instagramBlue(){return p.getCssVar("--ins-social-instagram-blue")||"#0095F6"},get instagramSecondary(){return p.getCssVar("--ins-social-instagram-secondary")||"#A8A8A8"},get instagramBorder(){return p.getCssVar("--ins-social-instagram-border")||"#262626"},get instagramLink(){return p.getCssVar("--ins-social-instagram-link")||"#E0F1FF"},get tiktokCyan(){return p.getCssVar("--ins-social-tiktok-cyan")||"#25F4EE"},get tiktokPink(){return p.getCssVar("--ins-social-tiktok-pink")||"#FE2C55"},get tiktokBlue(){return p.getCssVar("--ins-social-tiktok-blue")||"#20D5EC"}}}},T={fillForm(e,t){if(!e||!t||typeof t!="object")return;const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;Object.keys(t).forEach(s=>{const i=n.querySelector(`[name="${s}"]`);if(i)switch(i.type){case"checkbox":i.checked=!!t[s];break;case"radio":const r=n.querySelector(`[name="${s}"][value="${t[s]}"]`);r&&(r.checked=!0);break;default:i.value=t[s]||""}}),Object.entries({id:"editConfigTitleId",key:"key",page:"page",title:"title",description:"description",created_at:"created_at",updated_at:"updated_at"}).forEach(([s,i])=>{const r=n.querySelector(`#${i}`);r&&t[s]!==void 0&&(s.endsWith("_at")?r.value=p.formatDate(t[s]):r.value=t[s]||"")})},clearFormErrors(e){if(!e)return;const t=typeof e=="string"?document.querySelector(e):e;if(!t)return;[".is-invalid",".is-valid",".invalid-feedback",".valid-feedback"].forEach(o=>{t.querySelectorAll(o).forEach(s=>{o.startsWith(".is-")?s.classList.remove(o.substring(1)):s.remove()})}),t.querySelectorAll(".text-danger.error-message").forEach(o=>o.remove()),t.classList.remove("was-validated")},resetForm(e){e&&(e.reset(),this.clearFormErrors(e))},displayFormErrors(e,t){if(!e||!t||typeof t!="object")return;e.classList.add("was-validated");let n=null;Object.entries(t).forEach(([o,s])=>{const i=e.querySelector(`[name="${o}"]`)||e.querySelector(`#${o}`);if(!i)return;i.classList.add("is-invalid"),i.classList.remove("is-valid");const r=i.parentNode.querySelector(".invalid-feedback");r&&r.remove();const a=document.createElement("div");a.className="invalid-feedback d-block";const c=document.createElement("i");c.className="bi bi-exclamation-circle me-1";const m=document.createTextNode(Array.isArray(s)?s[0]:String(s));a.appendChild(c),a.appendChild(m),i.parentNode.appendChild(a),n||(n=i)}),n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}))},async handleFormSubmit(e,t){if(!e||!t)return;e.preventDefault(),this.clearFormErrors(t);const n=t.closest(".modal");let o=t.querySelector('button[type="submit"]');!o&&n&&(o=n.querySelector(".modal-footer .btn-primary")||n.querySelector('.modal-footer button[type="button"]:not(.btn-secondary)')||n.querySelector('button[type="submit"]')),o||(o=t.querySelector(".btn-primary"));const s=o?.innerHTML||"",i=o?.disabled||!1;if(o){o.disabled=!0;const a=window.i18n&&window.i18n.messages&&window.i18n.messages.processing?window.i18n.messages.processing:"";o.innerHTML='<i class="bi bi-hourglass-split"></i> '+a}const r=()=>{o&&(o.disabled=i,o.innerHTML=s)};try{const a=new FormData(t),c=t.action||window.location.href,m={"X-CSRF-TOKEN":p.getCSRFToken(),Accept:"application/json","X-Requested-With":"XMLHttpRequest"};if(S&&S.siteKey){const d=a.get("g-recaptcha-response"),h=a.get("recaptcha_action");if(!d||!h){const w=S.deriveAction(t),E=await S.execute(w);E&&(a.set("g-recaptcha-response",E),a.set("recaptcha_action",w),m["X-Recaptcha-Token"]=E)}else m["X-Recaptcha-Token"]=String(d)}const u=new AbortController,y=setTimeout(()=>u.abort(),3e4),l=await fetch(c,{method:"POST",body:a,signal:u.signal,credentials:"same-origin",headers:m});clearTimeout(y);const g=(l.headers.get("content-type")||"").toLowerCase();let f=null;if(g.includes("application/json")){try{f=await l.json()}catch{throw new Error(window.i18n?.messages?.invalid_server_response||"")}const d=f&&f.success===!1;if(l.ok&&!d){const h=f.message||window.i18n?.messages?.operation_completed_successfully||"";if(f.redirect){try{sessionStorage.setItem("toastMessage",JSON.stringify({message:h,type:"success"}))}catch{}setTimeout(()=>{window.location.assign(f.redirect)},10);return}r(),b.show(h,"success"),n&&M.hide(n),window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload()}else{if(f&&f.errors&&(r(),this.displayFormErrors(t,f.errors)),f&&f.redirect){f.message&&sessionStorage.setItem("toastMessage",JSON.stringify({message:f.message,type:l.status>=500?"danger":"warning"})),window.location.href=f.redirect;return}if(f&&f.message&&(r(),b.show(f.message,l.status>=500?"danger":"warning")),l.status===403){b.show(window.i18n?.messages?.not_authorized||"","warning"),setTimeout(()=>{window.location.href=Y},600);return}if(f&&(f.errors||f.message||f.redirect))return;r();const h=f&&(f.message||f.error)||window.i18n?.messages?.operation_failed||"";throw new Error(h)}}else{if(l.redirected){window.location.href=l.url;return}const d=await l.text();if(l.ok){if(d&&(d.includes("<!DOCTYPE html")||d.includes("<html"))){document.open(),document.write(d),document.close();return}window.location.reload();return}throw r(),new Error(window.i18n?.messages?.unexpected_response||"")}}catch(a){r(),a.name==="AbortError"?b.show(window.i18n?.messages?.request_timeout||"","danger"):b.show(a.message||window.i18n?.messages?.an_error_occurred||"","danger")}}};window.FormManager=T;const M={show(e){if(!e)return;e.style.display="block",e.classList.add("show","in"),e.classList.remove("out"),document.body.classList.add("modal-open");const t=document.createElement("div");t.className="modal-backdrop fade show",t.id=`modal-backdrop-${Date.now()}`,document.body.appendChild(t);const n=o=>{o.key==="Escape"&&(this.hide(e),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n),t.addEventListener("click",()=>this.hide(e)),e._cleanup=()=>{document.removeEventListener("keydown",n)}},hide(e){e&&(e.style.display="none",e.classList.remove("show","in"),e.classList.add("out"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove()),e._cleanup&&(e._cleanup(),delete e._cleanup))}},v={currentDataTable:null,setCurrentDataTable(e){this.currentDataTable=e,window.currentDataTable=e},getCurrentDataTable(){return this.currentDataTable},initializeColumnVisibility(e=".dataTable",t=".column-toggle"){document.querySelector(e)&&(document.querySelectorAll(t).forEach(o=>{o.addEventListener("change",()=>{this.currentDataTable&&this.currentDataTable.column(parseInt(o.dataset.column)).visible(o.checked),this.updateColumnCount(t)})}),this.updateColumnCount(t))},toggleAllColumns(e,t=".column-toggle"){document.querySelectorAll(t).forEach(n=>{n.checked=e,this.currentDataTable&&this.currentDataTable.column(parseInt(n.dataset.column)).visible(e)}),this.updateColumnCount(t)},updateColumnCount(e=".column-toggle",t="column-count"){const n=document.querySelectorAll(e),o=Array.from(n).filter(r=>r.checked).length,s=n.length,i=document.getElementById(t);i&&(i.textContent=`${o} of ${s} columns visible`)},exportTableToCSV(e=".dataTable",t="export.csv",n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const i=this.extractTableData(o,n).map(r=>r.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")).join(`
`);this.downloadFile(i,t,"text/csv;charset=utf-8;"),b.show(window.i18n?.messages?.table_export_success||"","success")},copyTableToClipboard(e=".dataTable",t=!0){const n=document.querySelector(e);if(!n){console.error("Table not found");return}const s=this.extractTableData(n,t).map(i=>i.join("	")).join(`
`);navigator.clipboard.writeText(s).then(()=>{b.show(window.i18n?.messages?.table_copy_success||"","success")}).catch(i=>{console.error("Failed to copy to clipboard:",i),b.show(window.i18n?.messages?.table_copy_failed||"","danger")})},printTable(e=".dataTable",t=null,n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const s=t||window.i18n?.messages?.data_export||"",i=window.i18n?.messages?.generated_on||"",r=this.extractTableData(o,n),a=this.generatePrintableTable(r),c=window.open("","_blank");c.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>${s}</title>
                <meta charset="utf-8">
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; font-weight: bold; }
                    tr:nth-child(even) { background-color: #f9f9f9; }
                    tr:hover { background-color: #f5f5f5; }
                    @media print {
                        .no-print { display: none; }
                        body { margin: 0; }
                        table { page-break-inside: auto; }
                        tr { page-break-inside: avoid; page-break-after: auto; }
                        th { page-break-after: avoid; }
                    }
                    @page { margin: 1cm; }
                </style>
            </head>
            <body>
                <h2>${s}</h2>
                <p style="color: #666; font-size: 12px; margin-bottom: 20px;">
                    ${i} ${new Date().toLocaleString()}
                </p>
                ${a}
            </body>
            </html>
        `),c.document.close(),c.focus(),setTimeout(()=>{c.print()},V.PRINT_DELAY),b.show(window.i18n?.messages?.print_dialog_opened||"","info")},extractTableData(e,t){const n=[],o=[];return e.querySelectorAll("thead th").forEach((r,a)=>{(!t||!this.currentDataTable||this.currentDataTable.column(a).visible())&&o.push(p.stripHtml(r.textContent.trim()))}),n.push(o),e.querySelectorAll("tbody tr").forEach(r=>{const a=[];r.querySelectorAll("td").forEach((m,u)=>{(!t||!this.currentDataTable||this.currentDataTable.column(u).visible())&&a.push(p.stripHtml(m.textContent.trim()))}),a.length>0&&n.push(a)}),n},generatePrintableTable(e){if(!e.length)return`<p>${window.i18n?.messages?.no_data_to_display||""}</p>`;const[t,...n]=e,o=t.map(i=>`<th>${i}</th>`).join(""),s=n.map(i=>`<tr>${i.map(r=>`<td>${r}</td>`).join("")}</tr>`).join("");return`
            <table>
                <thead><tr>${o}</tr></thead>
                <tbody>${s}</tbody>
            </table>
        `},downloadFile(e,t,n){const o=new Blob([e],{type:n}),s=URL.createObjectURL(o),i=document.createElement("a");i.href=s,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}},D={initializeDropdownBehavior(e=".dropdown-menu"){document.querySelectorAll(e).forEach(t=>{t.addEventListener("click",n=>{t.querySelector(".column-toggle")&&n.stopPropagation()})})},bindPasswordToggle(e=null,t=null){if(e&&t){const r=document.querySelector(e),a=document.querySelector(t);r&&a&&this.setupPasswordToggle(r,a);return}const n=document.querySelectorAll(".input-group");let o=!1;if(n.forEach(r=>{const a=r.querySelector("input[type='password']"),c=r.querySelector("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");a&&c&&(this.setupPasswordToggle(c,a),o=!0)}),o)return;const s=document.querySelectorAll("input[type='password']"),i=document.querySelectorAll("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");!i.length||!s.length||(s.length===1&&i.length===1?this.setupPasswordToggle(i[0],s[0]):s.forEach((r,a)=>{const c=i[a];c&&this.setupPasswordToggle(c,r)}))},setupPasswordToggle(e,t){e.__passwordToggleBound||(e.__passwordToggleBound=!0,e.addEventListener("click",()=>{const n=t.type==="password";t.type=n?"text":"password",typeof e.innerHTML<"u"&&(e.innerHTML=n?'<i class="bi bi-eye-slash"></i>':'<i class="bi bi-eye"></i>')}))}},_={async deleteItem(e,t={}){const{onSuccess:n,onError:o,successMessage:s=window.i18n?.toasts?.delete_success||"",errorMessage:i=window.i18n?.toasts?.delete_failed||"",headers:r={},redirectOnSuccess:a=!1,redirectUrl:c=null}=t;if(!e)return console.error("deleteItem: resourceUrl is required"),!1;try{const m=Object.assign({"X-CSRF-TOKEN":p.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r);if(S&&S.siteKey){const d=S.deriveActionFromUrl(e,"delete"),h=await S.execute(d);h&&(m["X-Recaptcha-Token"]=h)}const u=await fetch(e,{method:"DELETE",credentials:"same-origin",headers:m});let y=null;const l=(u.headers.get("content-type")||"").toLowerCase(),g=u.redirected===!0,f=u.url||null;if(l.includes("application/json"))try{y=await u.json()}catch{}if(u.ok){if(g&&f)return window.location.href=f,!0;if(y&&y.redirect)return window.location.href=y.redirect,!0;if(a&&c)return window.location.href=c,!0;if(b.show(y&&y.message||s,"success"),typeof n=="function")try{n(y)}catch(d){console.warn("onSuccess error:",d)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const d=new Error(y&&y.message||i);if(typeof o=="function")try{o(d,u)}catch(h){console.warn("onError error:",h)}return b.show(d.message,"danger"),!1}}catch(m){if(console.error("deleteItem error:",m),b.show(m.message||i,"danger"),typeof o=="function")try{o(m)}catch(u){console.warn("onError error:",u)}return!1}},async confirmDelete(e,t=null,n=null,o=null){const s=document.getElementById("confirmModal"),i=document.getElementById("confirmMessage"),r=document.getElementById("confirmDeleteBtn");if(s&&i&&r){i.textContent=(n.confirm.message||"").replace(":item",o);const a=r.cloneNode(!0);r.parentNode.replaceChild(a,r),a.addEventListener("click",function(){hideModal(s),window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(s)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")},async activationStatus(e,t={}){const{onSuccess:n,onError:o,successMessage:s=window.i18n?.toasts?.activate_success||"",errorMessage:i=window.i18n?.toasts?.activate_failed||"",headers:r={},action:a=null,redirectOnSuccess:c=!1,redirectUrl:m=null}=t;if(!e)return console.error("activationStatus: resourceUrl is required"),!1;if(!a)return console.error("activationStatus: action is required (activate|deactivate)"),!1;try{const u=Object.assign({"X-CSRF-TOKEN":p.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r),y={action:a};if(S&&S.siteKey){const w=S.deriveActionFromUrl(e,"post"),E=await S.execute(w);E&&(u["X-Recaptcha-Token"]=E,y["g-recaptcha-response"]=E,y.recaptcha_action=w)}const l=await fetch(e,{method:"POST",credentials:"same-origin",headers:u,body:JSON.stringify(y)});let g=null;const f=(l.headers.get("content-type")||"").toLowerCase(),d=l.redirected===!0,h=l.url||null;if(f.includes("application/json"))try{g=await l.json()}catch{}if(l.ok){if(d&&h)return window.location.href=h,!0;if(g&&g.redirect)return window.location.href=g.redirect,!0;if(c&&m)return window.location.href=m,!0;if(b.show(g&&g.message||s,"success"),typeof n=="function")try{n(g)}catch(w){console.warn("onSuccess error:",w)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const w=new Error(g&&g.message||i);if(typeof o=="function")try{o(w,l)}catch(E){console.warn("onError error:",E)}return b.show(w.message,"danger"),!1}}catch(u){if(console.error("activationStatus error:",u),b.show(u.message||i,"danger"),typeof o=="function")try{o(u)}catch(y){console.warn("onError error:",y)}return!1}},async requestJson(e,t={}){const{method:n="POST",data:o=null,headers:s={},onSuccess:i,onError:r,successMessage:a=window.i18n?.messages?.operation_completed_successfully||"",errorMessage:c=window.i18n?.messages?.operation_failed||"",redirectOnSuccess:m=!1,redirectUrl:u=null,showSuccessToast:y=!0,showErrorToast:l=!0}=t;if(!e)return console.error("requestJson: resourceUrl is required"),!1;try{const g=String(n||"POST").toUpperCase(),f=Object.assign({"X-CSRF-TOKEN":p.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},s);let d=o===null||typeof o>"u"?null:o;if(S&&S.siteKey&&["POST","PUT","PATCH","DELETE"].includes(g)){const C=S.deriveActionFromUrl(e,g.toLowerCase()),B=await S.execute(C);B&&(f["X-Recaptcha-Token"]=B,d&&typeof d=="object"&&(d=Object.assign({},d,{"g-recaptcha-response":B,recaptcha_action:C})))}const h=await fetch(e,{method:g,credentials:"same-origin",headers:f,body:d===null?null:JSON.stringify(d)});let w=null;const E=(h.headers.get("content-type")||"").toLowerCase(),x=h.redirected===!0,q=h.url||null;if(E.includes("application/json"))try{w=await h.json()}catch{}const U=w&&w.success===!1;if(h.ok&&!U){if(x&&q)return window.location.href=q,!0;if(w&&w.redirect)return window.location.href=w.redirect,!0;if(m&&u)return window.location.href=u,!0;if(y&&b.show(w&&w.message||a,"success"),typeof i=="function")try{i(w,h)}catch(C){console.warn("onSuccess error:",C)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}const O=new Error(w&&(w.message||w.error)||c);if(typeof r=="function")try{r(O,h,w)}catch(C){console.warn("onError error:",C)}return l&&b.show(O.message,h.status>=500?"danger":"warning"),!1}catch(g){if(console.error("requestJson error:",g),typeof r=="function")try{r(g)}catch(f){console.warn("onError error:",f)}return l&&b.show(g.message||c,"danger"),!1}},bindSelectJsonUpdate(e={}){const{selector:t="[data-update-url]",urlAttr:n="data-update-url",method:o="PUT",valueKey:s="status",prevValueDatasetKey:i="prevValue",disableDuringRequest:r=!0,idAttr:a=null,badgeAttr:c=null,renderBadge:m=null,successMessage:u=window.i18n?.toasts?.status_updated||window.i18n?.messages?.operation_completed_successfully||"",errorMessage:y=window.i18n?.toasts?.status_update_failed||window.i18n?.messages?.operation_failed||"",showSuccessToast:l=!0,showErrorToast:g=!0,buildData:f=null,onSuccess:d=null,onError:h=null}=e;document.querySelectorAll(t).forEach(w=>{!w||w.tagName!=="SELECT"||w.__crudSelectJsonUpdateBound||(w.__crudSelectJsonUpdateBound=!0,w.dataset[i]=String(w.value||""),w.addEventListener("change",async function(){const E=this.getAttribute(n),x=String(this.value||""),q=String(this.dataset[i]||"");if(x===q)return;if(!E){this.value=q;return}const U=typeof f=="function"?f(this):{[s]:x},O=this.disabled;r&&(this.disabled=!0);let C=null;if(a&&c){const L=this.getAttribute(a);L&&(C=document.querySelector(`[${c}="${L}"]`))}await _.requestJson(E,{method:o,data:U,successMessage:u,errorMessage:y,showSuccessToast:l,showErrorToast:g,onSuccess:(L,R)=>{if(this.dataset[i]=x,C&&typeof m=="function")try{C.textContent=String(m(x,this,L,R)||"")}catch{}if(typeof d=="function")try{d(this,L,R)}catch(I){console.warn("onSuccess hook failed:",I)}},onError:(L,R,I)=>{if(typeof h=="function")try{h(this,L,R,I)}catch(re){console.warn("onError hook failed:",re)}}})||(this.value=q),r&&(this.disabled=O)}))})},bindStatusSelect(e={},t=null,n=null){if(typeof e=="string"){const o=e,s=typeof t=="function"?t:null,i=n||window.i18n||{};return this.bindSelectJsonUpdate({selector:o,urlAttr:"data-update-url",method:"PUT",valueKey:"status",idAttr:"data-status-id",badgeAttr:"data-status-badge",renderBadge:s,successMessage:i?.toasts?.status_updated||i?.messages?.operation_completed_successfully,errorMessage:i?.toasts?.status_update_failed||i?.messages?.operation_failed,showSuccessToast:!0,showErrorToast:!0})}return this.bindSelectJsonUpdate(e||{})},async confirmActivate(e,t=null,n=null){const o=document.getElementById("confirmActivateModal"),s=document.getElementById("confirmActivateMessage"),i=document.getElementById("confirmActivateBtn");if(o&&s&&i){s.textContent=(n.confirm.message||"").replace(":item",e.title||e.key);const r=i.cloneNode(!0);i.parentNode.replaceChild(r,i),r.addEventListener("click",function(){hideModal(o),window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(o)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")}};Object.assign(window,{Toast:b,showToast:(e,t,n)=>b.show(e,t,n),fillForm:T.fillForm.bind(T),clearFormErrors:T.clearFormErrors.bind(T),resetForm:T.resetForm.bind(T),displayFormErrors:T.displayFormErrors.bind(T),handleFormSubmit:T.handleFormSubmit.bind(T),showModal:M.show.bind(M),hideModal:M.hide.bind(M),initializeColumnVisibility:v.initializeColumnVisibility.bind(v),toggleAllColumns:v.toggleAllColumns.bind(v),updateColumnCount:v.updateColumnCount.bind(v),exportTableToCSV:v.exportTableToCSV.bind(v),copyTableToClipboard:v.copyTableToClipboard.bind(v),printTable:v.printTable.bind(v),setCurrentDataTable:v.setCurrentDataTable.bind(v),getCurrentDataTable:v.getCurrentDataTable.bind(v),initializeDropdownBehavior:D.initializeDropdownBehavior.bind(D),bindPasswordToggle:D.bindPasswordToggle.bind(D),Utils:p,SwalHelper:k,stripHtml:p.stripHtml,removeHtmlTags:p.removeHtmlTags,escapeHtml:p.escapeHtml,truncateWords:p.truncateWords,safeJsonParse:p.safeJsonParse,getCSRFToken:p.getCSRFToken,deleteItem:_.deleteItem.bind(_),confirmDelete:_.confirmDelete?_.confirmDelete.bind(_):void 0,activationStatus:_.activationStatus.bind(_),requestJson:_.requestJson.bind(_),bindSelectJsonUpdate:_.bindSelectJsonUpdate.bind(_),bindStatusSelect:_.bindStatusSelect.bind(_)});window.confirmActivate=function(e={},t=null,n=null){let o={};if(e&&(e.itemLabel||e.resourceUrl||e.action||e.message||e.confirmText))o=Object.assign({},e);else{const a=e||{},c=n||window.i18n||{};o={itemLabel:a.title||a.key||a.full_name||a.name||"",resourceUrl:t||a.url||"",action:typeof a.active<"u"&&a.active?"deactivate":"activate",confirmText:null,confirmClass:null,message:c.confirm&&c.confirm.message?c.confirm.message:null,successMessage:c.toasts?.activate_success||null,errorMessage:c.toasts?.activate_failed||null,onSuccess:null,onError:null,redirectOnSuccess:!1,redirectUrl:null}}const s=document.getElementById("confirmActivateModal"),i=document.getElementById("confirmActivateMessage"),r=document.getElementById("confirmActivateBtn");if(!o.resourceUrl){console.error("confirmActivate: resourceUrl is required");return}if(s&&i&&r){const a=o.message||window.i18n?.confirm?.activate_message||window.i18n?.confirm?.message||"";i.textContent=a.replace(":item",o.itemLabel||"");const c=r.cloneNode(!0);o.confirmText&&(c.textContent=o.confirmText),o.confirmClass&&(c.className=o.confirmClass),r.parentNode.replaceChild(c,r),c.addEventListener("click",function(){try{hideModal(s)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(s)?.hide()}catch{}}window.activationStatus(o.resourceUrl,{action:o.action,successMessage:o.successMessage,errorMessage:o.errorMessage,onSuccess:o.onSuccess,onError:o.onError,redirectOnSuccess:o.redirectOnSuccess,redirectUrl:o.redirectUrl})});try{showModal(s)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(s)?.show()}catch{}}}else window.activationStatus(o.resourceUrl,{action:o.action,successMessage:o.successMessage,errorMessage:o.errorMessage,onSuccess:o.onSuccess,onError:o.onError,redirectOnSuccess:o.redirectOnSuccess,redirectUrl:o.redirectUrl})};window.clearForm||(window.clearForm=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&(t.querySelectorAll("input.form-control, textarea.form-control").forEach(n=>{n.type==="checkbox"||n.type==="radio"?n.checked=!1:n.value=""}),t.querySelectorAll("select").forEach(n=>{Array.from(n.options).forEach(o=>{o.selected=!1}),n._choices&&n._choices.removeActiveItems(),n.dispatchEvent(new Event("change",{bubbles:!0}))}))});window.clearErrors||(window.clearErrors=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&t.querySelectorAll(".error").forEach(n=>n.remove())});window.handleSubmit||(window.handleSubmit=function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;n&&(n.__handleSubmitBound||(n.__handleSubmitBound=!0,n.addEventListener("submit",async function(o){o.stopImmediatePropagation(),o.preventDefault();try{await window.FormManager.handleFormSubmit(o,n)}catch(s){console.error("handleSubmit error:",s),b.show(s?.message||window.i18n?.messages?.an_error_occurred||"","danger")}},!0)))});window.__recaptchaGlobalSubmitListenerAdded||(window.__recaptchaGlobalSubmitListenerAdded=!0,document.addEventListener("submit",async function(e){const t=e.target;if(!t||t.tagName!=="FORM"||t.__handleSubmitBound||t.dataset&&t.dataset.recaptchaSkip==="1"||t.dataset&&t.dataset.submitNative==="1"||t.__recaptchaSubmitInProgress)return;const n=String(t.getAttribute("method")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(n)){e.preventDefault(),t.__recaptchaSubmitInProgress=!0;try{await window.FormManager.handleFormSubmit(e,t)}catch(o){console.error("Global submit handler error:",o)}finally{t.__recaptchaSubmitInProgress=!1}}},!0));document.addEventListener("DOMContentLoaded",()=>{try{D.bindPasswordToggle(),D.initializeDropdownBehavior();const e=sessionStorage.getItem("toastMessage");if(e){try{const{message:t,type:n}=JSON.parse(e);t&&b.show(t,n||"info")}catch(t){console.warn("Failed to parse stored toast:",t)}sessionStorage.removeItem("toastMessage")}}catch(e){console.warn("Auto-initialization warning:",e)}});document.addEventListener("click",function(e){if(e.target.matches('[data-bs-dismiss="modal"]')||e.target.closest('[data-bs-dismiss="modal"]')){const t=e.target.closest(".modal");t&&hideModal(t)}});(function(){async function t(){if(!window.loadChoices)return;const n=await window.loadChoices();document.querySelectorAll("select.select2, select[data-choices]").forEach(s=>{if(s._choices)return;const i=window.i18n&&window.i18n.messages&&window.i18n.messages.select_an_option||null,r=s.getAttribute("data-placeholder")||s.getAttribute("placeholder")||null,a=i||r||(document.documentElement.lang==="ar"?"اختر خيارًا":window.i18n?.messages?.select_an_option||"Select an option");try{const c=new n(s,{removeItemButton:s.multiple,shouldSort:!1,placeholder:!0,placeholderValue:a,searchEnabled:!0});s._choices=c}catch(c){console.warn("Choices initialization skipped or failed:",c)}})}document.addEventListener("DOMContentLoaded",()=>{t().catch(()=>null),setTimeout(()=>{t().catch(()=>null)},400)})})();async function pe(e,t=null,n={}){const{successText:o='<i class="bi bi-check me-1"></i>Copied!',successClass:s="btn-success",originalClass:i="btn-outline-secondary",timeout:r=2e3}=n;try{if(navigator.clipboard)await navigator.clipboard.writeText(e);else{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}if(t){const a=t.innerHTML;t.innerHTML=o,t.classList.add(s),t.classList.remove(i),setTimeout(()=>{t.innerHTML=a,t.classList.remove(s),t.classList.add(i)},r)}return!0}catch(a){return console.error("Copy failed:",a),!1}}Object.assign(window,{copyToClipboard:pe});window.RefinementManager={applyRefinement:function(e,t,n){k.showLoading(window.i18n?.messages?.processing||"Processing...",`Applying ${e} refinement...`),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({action:e})}).then(o=>o.json()).then(o=>{if(o.success)k.success(window.i18n?.messages?.refinement_applied||"Refinement Applied!",o.message||window.i18n?.messages?.content_refined_successfully||"Content has been refined successfully.",{timer:2e3}).then(()=>{n?n(o):window.location.reload()});else throw new Error(o.message||window.i18n?.messages?.failed_to_apply_refinement||"Failed to apply refinement")}).catch(o=>{console.error("Error:",o),k.error(window.i18n?.messages?.refinement_failed||"Refinement Failed",o.message||window.i18n?.messages?.failed_to_apply_refinement_text||"Failed to apply refinement. Please try again.")})},adjustTone:function(e,t,n){k.showLoading(window.i18n?.messages?.adjusting_tone||"Adjusting Tone...",`Changing tone to ${e}...`),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({tone:e})}).then(o=>o.json()).then(o=>{if(o.success)k.success(window.i18n?.messages?.tone_adjusted||"Tone Adjusted!",o.message||window.i18n?.messages?.content_tone_adjusted||`Content tone has been changed to ${e}.`,{timer:2e3}).then(()=>{n?n(o):window.location.reload()});else throw new Error(o.message||window.i18n?.messages?.failed_to_adjust_tone||"Failed to adjust tone")}).catch(o=>{console.error("Error:",o),k.error(window.i18n?.messages?.tone_adjustment_failed||"Tone Adjustment Failed",o.message||window.i18n?.messages?.failed_to_adjust_tone_text||"Failed to adjust tone. Please try again.")})}};window.ApiClient={getToken:function(){return document.querySelector('meta[name="csrf-token"]')?.content||""},buildOptions:function(e,t,n={}){const o=t instanceof FormData,s={"X-CSRF-TOKEN":this.getToken(),Accept:"application/json",...n};!o&&t&&(s["Content-Type"]="application/json");const i={method:e,headers:s};return t&&(i.body=o?t:JSON.stringify(t)),i},get:async function(e,t={}){const n=new URLSearchParams(t).toString(),o=n?`${e}?${n}`:e;return(await fetch(o,this.buildOptions("GET",null))).json()},post:async function(e,t={}){return(await fetch(e,this.buildOptions("POST",t))).json()},put:async function(e,t={}){return(await fetch(e,this.buildOptions("PUT",t))).json()},delete:async function(e,t={}){return(await fetch(e,this.buildOptions("DELETE",t))).json()},request:async function(e,t={}){const{method:n="POST",data:o={},loadingText:s="Processing...",showLoading:i=!0,onSuccess:r,onError:a,onFinally:c}=t;i&&typeof Swal<"u"&&Swal.fire({title:s,allowOutsideClick:!1,didOpen:()=>Swal.showLoading()});try{const u=await(await fetch(e,this.buildOptions(n,o))).json();return i&&typeof Swal<"u"&&Swal.close(),u.success?r&&r(u):a?a(u):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:u.message||window.i18n?.messages?.operation_failed||"Operation failed"}),u}catch(m){throw console.error("ApiClient Error:",m),i&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.connection_failed||"Connection failed. Please try again."}),a&&a({success:!1,message:m.message}),m}finally{c&&c()}},submitForm:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;const o=new FormData(n),s=n.action||window.location.href,i=n.method?.toUpperCase()||"POST";return this.request(s,{method:i,data:o,...t})}};window.FormHelper={bind:function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;!n||n.__formHelperBound||(n.__formHelperBound=!0,n.addEventListener("submit",async o=>{o.preventDefault(),await this.submit(n,t)}))},submit:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return null;const{onSuccess:o,onError:s,onBefore:i,onComplete:r,loadingText:a="Processing...",resetOnSuccess:c=!1,closeModalOnSuccess:m=!0}=t,u=n.querySelector('button[type="submit"], .btn-primary'),y=u?.innerHTML,l=n.closest(".modal");if(i&&i(n)===!1)return null;u&&(u.disabled=!0,u.innerHTML=`<i class="bi bi-hourglass-split me-1"></i>${a}`);try{const g=new FormData(n),f=n.action||window.location.href,d=await ApiClient.post(f,g);if(u&&(u.disabled=!1,u.innerHTML=y),d.success){if(c&&n.reset(),m&&l){const h=bootstrap.Modal.getInstance(l);h&&h.hide()}if(d.redirect)return window.location.href=d.redirect,d;o?o(d):d.message&&typeof Swal<"u"&&Swal.fire({icon:"success",title:d.message,toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1})}else s?s(d):d.errors?this.showErrors(n,d.errors):d.message&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:d.message});return r&&r(d),d}catch(g){return u&&(u.disabled=!1,u.innerHTML=y),s?s({success:!1,message:g.message}):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.check_connection||"Please check your connection"}),r&&r({success:!1,error:g}),null}},showErrors:function(e,t){this.clearErrors(e),Object.entries(t).forEach(([o,s])=>{const i=e.querySelector(`[name="${o}"], [name="${o}[]"]`);if(i){i.classList.add("is-invalid");const r=document.createElement("div");r.className="invalid-feedback d-block",r.textContent=Array.isArray(s)?s[0]:s,i.parentNode.appendChild(r)}});const n=e.querySelector(".is-invalid");n&&n.focus()},clearErrors:function(e){e&&(e.querySelectorAll(".is-invalid").forEach(t=>t.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(t=>t.remove()))},getData:function(e){const t=typeof e=="string"?document.querySelector(e):e;return t?Object.fromEntries(new FormData(t)):{}},setData:function(e,t){const n=typeof e=="string"?document.querySelector(e):e;!n||!t||Object.entries(t).forEach(([o,s])=>{const i=n.querySelector(`[name="${o}"]`);if(i)if(i.type==="checkbox")i.checked=!!s;else if(i.type==="radio"){const r=n.querySelector(`[name="${o}"][value="${s}"]`);r&&(r.checked=!0)}else i.value=s})},toggleFavorite:async function(e,t,n={}){const{removeCard:o=!0,onSuccess:s,successMessage:i,errorMessage:r}=n,a=e.closest(".col-lg-6, .col-md-6, .card"),c=e.querySelector("i"),m=c?.className;c&&(c.className="bi bi-hourglass-split fs-5"),e.disabled=!0;try{const u=await ApiClient.post(t);u.success?(o&&a&&(a.style.transition="opacity 0.3s, transform 0.3s",a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(()=>{a.remove(),document.querySelectorAll(".col-lg-6, .col-md-6").length===0&&location.reload()},300)),typeof Swal<"u"&&Swal.fire({icon:"success",title:i||u.message||window.i18n?.messages?.updated||"Updated!",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),s&&s(u)):(c&&(c.className=m),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:r||u.message||window.i18n?.messages?.error||"Error",toast:!0,position:"top-end",timer:3e3}))}catch{c&&(c.className=m),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",toast:!0,position:"top-end",timer:3e3})}},confirmDelete:async function(e,t={}){const{confirmTitle:n=window.i18n?.messages?.are_you_sure||"Are you sure?",confirmText:o=window.i18n?.messages?.action_cannot_be_undone||"This action cannot be undone.",confirmButton:s=window.i18n?.messages?.yes_delete||"Yes, Delete",onSuccess:i}=t;if(typeof Swal>"u"){if(!confirm(o))return}else if(!(await Swal.fire({icon:"warning",title:n,text:o,showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:s})).isConfirmed)return;try{const r=await ApiClient.delete(e);r.success?i?i(r):r.redirect?window.location.href=r.redirect:location.reload():typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:r.message})}catch{typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.please_try_again||"Please try again"})}}};window.formatDate=p.formatDate;window.debounce=p.debounce;document.addEventListener("DOMContentLoaded",function(){console.log("✅ Hakim Clinics - JavaScript Utilities Loaded"),console.log("📦 Available Managers:",{RefinementManager:typeof window.RefinementManager<"u",ApiClient:typeof window.ApiClient<"u",FormHelper:typeof window.FormHelper<"u"})});function we(){const e=A(()=>import("./swiper-DpKYHp1-.js"),__vite__mapDeps([0,1])),t=A(()=>import("./index-BvN21dhf.js"),__vite__mapDeps([2,1]));return Promise.all([e,t]).then(([n,o])=>{const s=n.default||n.Swiper||n,i={Navigation:o.Navigation,Pagination:o.Pagination,Autoplay:o.Autoplay,EffectFade:o.EffectFade,EffectCreative:o.EffectCreative,EffectCoverflow:o.EffectCoverflow,Thumbs:o.Thumbs};return{Swiper:s,modules:i}})}function he(e,t){document.querySelectorAll('.swiper[data-swiper="category"]').forEach(n=>{const o=n.querySelector(".swiper-button-next"),s=n.querySelector(".swiper-button-prev"),i=n.querySelector(".swiper-pagination"),r=!!(o&&s),c=n.querySelectorAll(".swiper-slide").length>=3,m=[t.Pagination,t.Autoplay,t.EffectCoverflow];r&&m.push(t.Navigation),new e(n,{modules:m,loop:c,rewind:!c,watchOverflow:!0,speed:650,autoplay:{delay:3800,disableOnInteraction:!1},grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:6,stretch:0,depth:120,modifier:1,slideShadows:!0},centeredSlides:!1,slidesPerView:1,spaceBetween:20,breakpoints:{576:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:24},992:{slidesPerView:1,spaceBetween:28}},pagination:{el:i,clickable:!0},...r?{navigation:{nextEl:o,prevEl:s}}:{}})})}function ye(e,t){document.querySelectorAll(".product-gallery").forEach(n=>{const o=n.querySelector('.swiper[data-swiper="product"]'),s=n.querySelector('.swiper[data-swiper="product-thumbs"]');let i=null;if(s&&(i=new e(s,{modules:[t.Navigation],slidesPerView:5,spaceBetween:8,freeMode:!0,watchSlidesProgress:!0,breakpoints:{0:{slidesPerView:4},576:{slidesPerView:5}}})),o){const r=o.querySelector(".swiper-pagination");new e(o,{modules:[t.Pagination,t.EffectFade,t.Thumbs],loop:!0,speed:500,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:1,spaceBetween:8,pagination:{el:r,clickable:!0},thumbs:i?{swiper:i}:void 0})}})}function X(){document.querySelector(".swiper")&&we().then(({Swiper:t,modules:n})=>{he(t,n),ye(t,n)}).catch(()=>{})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",X):X();function N(){document.querySelectorAll('input[type="tel"], input#phone, input[name="phone"]').forEach(t=>{t.classList.contains("phone-initialized")||(t.classList.add("phone-initialized"),t.placeholder||(t.placeholder="05xxxxxxxx"))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",N):N();function be(){N()}window.initPhoneInputs=N;window.reinitPhoneInputs=be;window.bootstrap=ae;function P(e){let t=null;return()=>(t||(t=e().then(n=>n&&n.default?n.default:n)),t)}const Q=P(()=>A(()=>import("./index-BZ7OSNzo.js"),[])),Z=P(()=>A(()=>import("./choices-DNEFJAfy.js"),[])),ee=P(()=>A(()=>import("./sweetalert2.esm.all-Dx3EkU1z.js"),[])),te=P(()=>A(()=>import("./quill-ChYgufvi.js"),__vite__mapDeps([3,4]))),ne=P(()=>A(()=>import("./easymde-Ca5tH7jq.js").then(e=>e.e),__vite__mapDeps([5,4]))),oe=P(()=>A(()=>import("./jsvectormap.esm-Ba9GIb0h.js"),[]));window.DataTable=W;globalThis.DataTable=W;window.loadFlatpickr=Q;window.loadChoices=Z;window.loadSwal=ee;window.loadQuill=te;window.loadSimpleMDE=ne;window.loadJSVectorMap=oe;function F(e){let t=null;const n=()=>(t||(t=e()),t);return new Proxy({},{get(o,s){if(s!=="then")return(...i)=>n().then(r=>{const a=r[s];return typeof a=="function"?a.apply(r,i):a})}})}window.Swal=F(ee);window.flatpickr=(...e)=>Q().then(t=>t(...e));window.Choices=F(Z);window.Quill=F(te);window.SimpleMDE=F(ne);window.JSVectorMap=F(oe);
