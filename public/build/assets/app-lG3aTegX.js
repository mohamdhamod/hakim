const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/swiper-DpKYHp1-.js","assets/utils-D71RtZIR.js","assets/index-BvN21dhf.js","assets/quill-ChYgufvi.js","assets/vendor-CnHzkViu.js","assets/easymde-Ca5tH7jq.js"])))=>i.map(i=>d[i]);
import{r as re,a as se,b as ie,D as J}from"./vendor-CnHzkViu.js";const ae="modulepreload",ce=function(e){return"/build/"+e},U={},A=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){let c=function(g){return Promise.all(g.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");i=c(n.map(g=>{if(g=ce(g),g in U)return;U[g]=!0;const u=g.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":ae,u||(l.as="script"),l.crossOrigin="",l.href=g,a&&l.setAttribute("nonce",a),document.head.appendChild(l),u)return new Promise((h,d)=>{l.addEventListener("load",h),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${g}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};re();se();let j=!1;async function $(){if(j||!document.getElementById("contentChart"))return;const t=await A(()=>import("./auto-CcLMyVVA.js"),[]),n=t&&t.default?t.default:t;window.Chart=n,j=!0,window.chartsInitialized=!0,n.defaults&&(n.defaults.animation=n.defaults.animation||{},n.defaults.animation.duration=1e3,n.defaults.animation.easing="easeOutQuart",n.defaults.responsive=!0)}function le(){document.readyState==="complete"?$():window.addEventListener("load",$)}window.initializeCharts=$;le();document.addEventListener("DOMContentLoaded",function(){initializeCharts(),de()});function de(){const e=document.documentElement;window.innerWidth<992?e.setAttribute("data-sidenav-size","offcanvas"):e.setAttribute("data-sidenav-size","default"),N()}function W(){const e=document.documentElement;e.getAttribute("data-sidenav-size")==="collapse"?e.setAttribute("data-sidenav-size","default"):e.setAttribute("data-sidenav-size","collapse"),N(),typeof O=="function"&&O()}function N(){const e=document.documentElement,t=document.querySelector(".menu-collapse-box .button-collapse-toggle");if(!t)return;const n=t.querySelector("i"),o=t.querySelector("span"),i=e.getAttribute("data-sidenav-size")==="collapse",s=t.getAttribute("data-text-collapse")||(o&&o.textContent?o.textContent:""),r=t.getAttribute("data-text-expand")||s;if(n){const c=i?"bi bi-chevron-double-right":"bi bi-chevron-double-left";n.className!==c&&(n.className=c)}if(o){const c=i?r:s;o.textContent!==c&&(o.textContent=c)}const a=document.querySelector(".sidenav-menu");a&&(i?a.classList.add("force-collapse"):a.classList.remove("force-collapse"))}function G(){document.documentElement.classList.toggle("sidebar-enable"),typeof O=="function"&&O()}window.toggleSidebar=W;window.toggleMobileSidebar=G;document.addEventListener("click",function(e){const t=document.getElementById("sidenavMenu"),n=document.querySelector(".button-collapse-toggle.d-xl-none"),o=document.documentElement;window.innerWidth<992&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&o.classList.contains("sidebar-enable")&&o.classList.remove("sidebar-enable")});function ue(){const e=document.documentElement;window.innerWidth>=992?(e.classList.remove("sidebar-enable"),e.getAttribute("data-sidenav-size")==="offcanvas"&&e.setAttribute("data-sidenav-size","default")):e.getAttribute("data-sidenav-size")!=="offcanvas"&&e.setAttribute("data-sidenav-size","offcanvas"),N()}function me(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}}function O(){const e=document.documentElement;try{e&&e.getAttribute&&e.getAttribute("dir")==="rtl"&&(e.classList.add("ins-rtl-repaint"),setTimeout(()=>e.classList.remove("ins-rtl-repaint"),60))}catch{}}function fe(e,t){const n=document.getElementById("selected-language-image"),o=document.getElementById("selected-language-flag"),i=document.getElementById("selected-language-code");if(n&&(t?n.src=t:window.FLAG_URLS&&window.FLAG_URLS[e]&&(n.src=window.FLAG_URLS[e])),o){const s=[];o.classList.forEach(r=>{r.startsWith("fi-")&&s.push(r)}),s.forEach(r=>o.classList.remove(r)),o.classList.add(`fi-${e}`)}i&&(i.textContent=` ${e.toUpperCase()}`)}window.changeLanguage=fe;window.addEventListener("resize",me(ue,150));document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".menu-collapse-box .button-collapse-toggle");e&&(e.getAttribute("onclick")||e.addEventListener("click",function(n){W()}));const t=document.querySelector(".button-collapse-toggle.d-xl-none");t&&(t.getAttribute("onclick")||t.addEventListener("click",function(n){G()}))});document.addEventListener("DOMContentLoaded",function(){typeof initializeCharts=="function"&&initializeCharts();var e=document.querySelector(".topbar-link .bi-moon, .topbar-link .bi-moon-stars");e&&e.parentElement.addEventListener("click",function(){var t=document.documentElement,n=t.getAttribute("data-bs-theme");t.setAttribute("data-bs-theme",n==="dark"?"light":"dark")})});document.addEventListener("click",function(e){try{let s=function(r){return function a(c){if(!(c&&c.propertyName&&c.propertyName!=="max-height")){var g=r.closest(".card"),u=g&&g.classList.contains("card-collapse");u?(r.style.overflow="hidden",r.style.maxHeight="0px"):(r.style.overflow="",r.style.maxHeight=""),r.__cardAnimating=!1,r.removeEventListener("transitionend",a)}}};var t=e.target&&e.target.closest?e.target.closest(".card-action-item"):null;if(!t)return;var n=t.closest(".card");if(!n)return;var o=!n.classList.contains("card-collapse"),i=n.querySelectorAll(".card-body");i.forEach(function(r){r.__cardAnimating;var a=r.scrollHeight,c=s(r);r.__cardAnimating=!0,r.style.transition=r.style.transition||"max-height 0.28s ease",o?(r.style.maxHeight=a+"px",requestAnimationFrame(function(){r.style.overflow="hidden",r.style.maxHeight="0px"}),r.addEventListener("transitionend",c)):(r.style.overflow="hidden",r.style.maxHeight="0px",requestAnimationFrame(function(){r.style.maxHeight=r.scrollHeight+"px"}),r.addEventListener("transitionend",c))}),n.classList.toggle("card-collapse")}catch{}});document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)});try{document.querySelectorAll(".card.card-collapse").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.overflow="hidden",n.style.maxHeight="0px"})}),document.querySelectorAll(".card:not(.card-collapse)").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.maxHeight="",n.style.overflow=""})})}catch{}});const H={TOAST_DELAY:5e3,ANIMATION_DURATION:220,PRINT_DELAY:250},X={isAvailable(){return typeof Swal<"u"&&typeof Swal.fire=="function"},showLoading(e,t=""){return this.isAvailable()?Swal.fire({title:e||window.i18n?.messages?.processing||"Processing...",text:t,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>Swal.showLoading()}):null},success(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"success",title:e,text:t,timer:n.timer||2500,timerProgressBar:!0,...n}):(alert(e),Promise.resolve({isConfirmed:!0}))},error(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"error",title:e,text:t,confirmButtonText:window.i18n?.messages?.ok||"OK",...n}):(alert(e+(t?`
`+t:"")),Promise.resolve({isConfirmed:!0}))},confirm(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:n.icon||"warning",title:e,text:t,showCancelButton:!0,confirmButtonColor:n.confirmButtonColor||"#3085d6",cancelButtonColor:n.cancelButtonColor||"#d33",confirmButtonText:n.confirmButtonText||window.i18n?.messages?.confirm||"Confirm",cancelButtonText:n.cancelButtonText||window.i18n?.messages?.cancel||"Cancel",...n}):Promise.resolve({isConfirmed:confirm(e+(t?`
`+t:""))})},toast(e,t="success",n={}){return this.isAvailable()?Swal.fire({icon:t,title:e,toast:!0,position:n.position||"top-end",showConfirmButton:!1,timer:n.timer||2500,timerProgressBar:!0,...n}):(console.log(`[${t}] ${e}`),Promise.resolve())},close(){this.isAvailable()&&Swal.close()}},C=function(){const e=document.querySelector('meta[name="recaptcha-site-key"]')?.getAttribute("content")||"";let t=null,n=0;function o(){return!!e&&typeof window.grecaptcha<"u"&&typeof window.grecaptcha.execute=="function"}function i(l=2500){return e?o()?Promise.resolve(!0):n&&Date.now()<n?Promise.resolve(!1):t||(t=new Promise(h=>{const d=Date.now();try{if(!document.querySelector('script[src*="www.google.com/recaptcha/api.js"]')){const b=document.createElement("script");b.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(e)}`,b.async=!0,b.defer=!0,document.head.appendChild(b)}}catch{}const p=()=>{if(o())return h(!0);if(Date.now()-d>=l)return h(!1);setTimeout(p,80)};p()}).then(h=>(h||(n=Date.now()+3e4),h)).finally(()=>{o()||(t=null)}),t):Promise.resolve(!1)}function s(l){return String(l||"submit").trim().toLowerCase().replace(/-/g,"_").replace(/[^a-z_\/]/g,"_").replace(/_+/g,"_").replace(/\/+?/g,"/").replace(/^_+|_+$/g,"").replace(/\/_+/g,"/").replace(/_+\//g,"/").slice(0,80)||"submit"}function r(l){const d=String(l||"").split("?")[0].split("#")[0].split("/").filter(Boolean),p=[];for(let w=0;w<d.length;w++){const b=String(d[w]||"").trim();if(!b||w===0&&/^[a-z]{2}$/i.test(b)||/^\d+$/.test(b)||/^[0-9a-f]{8,}$/i.test(b))continue;let _=b.toLowerCase().replace(/-/g,"_").replace(/[^a-z_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");_&&p.push(_)}return p.join("/")}function a(l){if(!l)return"submit";const h=l.getAttribute("data-recaptcha-action");if(h)return s(h);if(l.id)return s("form_"+l.id);const d=l.action||window.location.pathname;try{const p=new URL(d,window.location.origin).pathname;return s(r(p))}catch{return"submit"}}function c(l,h="submit"){const d=String(h||"submit").trim().toLowerCase();try{const p=new URL(String(l||""),window.location.origin).pathname,w=r(p);return s(`${d}_${w||"submit"}`)}catch{return s(`${d}_submit`)}}async function g(l){if(!o()&&(!await i()||!o()))return null;const h=s(l);return await new Promise(d=>{try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:h}).then(p=>d(p)).catch(()=>d(null))})}catch{d(null)}})}function u(l){if(l){if(!l.querySelector('input[name="g-recaptcha-response"]')){const h=document.createElement("input");h.type="hidden",h.name="g-recaptcha-response",l.appendChild(h)}if(!l.querySelector('input[name="recaptcha_action"]')){const h=document.createElement("input");h.type="hidden",h.name="recaptcha_action",l.appendChild(h)}}}function y(l,h,d){u(l);const p=l.querySelector('input[name="g-recaptcha-response"]'),w=l.querySelector('input[name="recaptcha_action"]');p&&(p.value=h||""),w&&(w.value=s(d))}return{isAvailable:o,ensureLoaded:i,deriveAction:a,deriveActionFromUrl:c,execute:g,setOnForm:y,siteKey:e}}(),Y=document.querySelector('meta[name="login-url"]')?.getAttribute("content")||"/login";if(typeof window.fetch=="function"&&!window.__fetchSessionWrapped){const e=window.fetch.bind(window);window.fetch=async(t,n=void 0)=>{try{const i=String(n&&n.method||(t instanceof Request?t.method:"GET")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(i)&&C&&C.siteKey){const s=t instanceof Request?t.url:String(t||""),r=new URL(s,window.location.href);if(r.origin===window.location.origin){const a=n&&n.headers?n.headers:t instanceof Request?t.headers:void 0,c=new Headers(a||{});if(!c.has("X-Recaptcha-Token")){const g=C.deriveActionFromUrl(r.href,i.toLowerCase()),u=await C.execute(g);u&&(c.set("X-Recaptcha-Token",u),n=Object.assign({},n||{},{headers:c}))}}}}catch{}const o=await e(t,n);if(o&&(o.status===401||o.status===419)){try{v.show(window.i18n?.messages?.session_expired_redirecting||window.i18n?.messages?.session_expired||"","warning")}catch{}setTimeout(()=>{window.location.href=Y},500)}return o},window.__fetchSessionWrapped=!0}const v=function(){let e=null;const t=H.TOAST_DELAY;function n(){if(document.getElementById("ins-toast-styles"))return;const r=`
        .ins-toast-container{position:fixed;right:1rem;bottom:1rem;z-index:10850;display:flex;flex-direction:column;gap:0.5rem;max-width:360px;pointer-events:none}
        @media (max-width: 576px){.ins-toast-container{left:50%;right:auto;bottom:1rem;transform:translateX(-50%);max-width:92vw}}
        .ins-toast{pointer-events:auto;display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0.75rem;border-radius:0.5rem;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.12);overflow:hidden;transform-origin:right center;transition:opacity .18s ease,transform .18s ease}
        .ins-toast .ins-body{flex:1;font-size:0.95rem}
        .ins-toast .ins-close{background:transparent;border:0;color:inherit;opacity:0.85;cursor:pointer}
        .ins-toast.info{background:linear-gradient(90deg,#0d6efd,#6f42c1)}
        .ins-toast.success{background:linear-gradient(90deg,#198754,#20c997)}
        .ins-toast.danger{background:linear-gradient(90deg,#dc3545,#e55353)}
        .ins-toast.warning{background:linear-gradient(90deg,#fd7e14,#ffc107)}
        .ins-toast .ins-progress{height:3px;background:rgba(255,255,255,0.85);width:100%;transform-origin:left center}
        `,a=document.createElement("style");a.id="ins-toast-styles",a.textContent=r,document.head.appendChild(a)}function o(){return e||(e=document.createElement("div"),e.className="ins-toast-container",document.body.appendChild(e),e)}function i(r){!r||!r.parentNode||(r.style.opacity="0",r.style.transform="translateY(8px)",r._timer&&(clearTimeout(r._timer),delete r._timer),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},H.ANIMATION_DURATION))}function s(r,a="info",c={}){if(!r)return null;n();const g=o(),u=c.delay||t,y=c.autoHide!==!1,l=document.createElement("div");l.className=`ins-toast ${a}`,l.setAttribute("role","status"),l.setAttribute("aria-live","polite"),l.innerHTML=`
            <div class="ins-body"></div>
            <button type="button" class="ins-close" aria-label="Close">&times;</button>
            <div class="ins-progress"></div>
        `;const h=l.querySelector(".ins-close"),d=l.querySelector(".ins-body"),p=l.querySelector(".ins-progress");return d&&(d.textContent=String(r)),h.addEventListener("click",()=>i(l)),g.appendChild(l),requestAnimationFrame(()=>{l.style.opacity="1",l.style.transform="translateY(0)"}),p&&y&&(p.style.width="100%",p.style.transition=`width ${u}ms linear`,requestAnimationFrame(()=>{p.style.width="0%"})),y?l._timer=setTimeout(()=>i(l),u):p&&(p.style.opacity="0.48"),l}return{show:s,hide:i}}();window.Toast||(window.Toast=v);window.SwalUtil=X;const f={getCSRFToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},stripHtml(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},removeHtmlTags(e){return e?e.replace(/<[^>]*>/g,""):""},formatDate(e,t={}){if(!e)return"";const n=new Date(e),o=t.locale||"en-US",i=t.format||{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return n.toLocaleString(o,i)},safeJsonParse(e,t=null){try{return JSON.parse(e)}catch{return t}},escapeHtml(e){return(e==null?"":String(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},truncateWords(e,t=10){const n=e==null?"":String(e),o=n.trim().split(/\s+/).filter(Boolean);return o.length<=t?n.trim():`${o.slice(0,t).join(" ")}...`},getCssVar(e){const t=e.startsWith("--")?e:`--${e}`;return getComputedStyle(document.documentElement).getPropertyValue(t).trim()},colors:{get primary(){return f.getCssVar("--ins-primary")||"#428177"},get secondary(){return f.getCssVar("--ins-secondary")||"#054239"},get success(){return f.getCssVar("--ins-success")||"#22c55e"},get danger(){return f.getCssVar("--ins-danger")||"#ef4444"},get warning(){return f.getCssVar("--ins-warning")||"#eab308"},get info(){return f.getCssVar("--ins-info")||"#06b6d4"},get indigo(){return f.getCssVar("--ins-indigo")||"#6366f1"},get blue(){return f.getCssVar("--ins-blue")||"#3b82f6"},get teal(){return f.getCssVar("--ins-teal")||"#14b8a6"},get bodyColor(){return f.getCssVar("--ins-body-color")||"#374151"},get bodyBg(){return f.getCssVar("--ins-body-bg")||"#f9f9f9"},get white(){return f.getCssVar("--ins-white")||"#fff"},get black(){return f.getCssVar("--ins-black")||"#030712"},social:{get facebook(){return f.getCssVar("--ins-social-facebook")||"#1877F2"},get facebookGreen(){return f.getCssVar("--ins-social-facebook-green")||"#42B72A"},get facebookText(){return f.getCssVar("--ins-social-facebook-text")||"#050505"},get facebookSecondary(){return f.getCssVar("--ins-social-facebook-secondary")||"#65676B"},get facebookReaction(){return f.getCssVar("--ins-social-facebook-reaction")||"#F0284A"},get twitter(){return f.getCssVar("--ins-social-twitter")||"#1DA1F2"},get twitterBlue(){return f.getCssVar("--ins-social-twitter-blue")||"#1D9BF0"},get twitterBg(){return f.getCssVar("--ins-social-twitter-bg")||"#000000"},get twitterBorder(){return f.getCssVar("--ins-social-twitter-border")||"#2F3336"},get twitterText(){return f.getCssVar("--ins-social-twitter-text")||"#E7E9EA"},get twitterSecondary(){return f.getCssVar("--ins-social-twitter-secondary")||"#71767B"},get linkedin(){return f.getCssVar("--ins-social-linkedin")||"#0A66C2"},get linkedinDark(){return f.getCssVar("--ins-social-linkedin-dark")||"#004182"},get linkedinBg(){return f.getCssVar("--ins-social-linkedin-bg")||"#F4F2EE"},get linkedinReaction(){return f.getCssVar("--ins-social-linkedin-reaction")||"#E16745"},get linkedinCelebrate(){return f.getCssVar("--ins-social-linkedin-celebrate")||"#6DAE4F"},get instagram(){return f.getCssVar("--ins-social-instagram")||"#E4405F"},get instagramBlue(){return f.getCssVar("--ins-social-instagram-blue")||"#0095F6"},get instagramSecondary(){return f.getCssVar("--ins-social-instagram-secondary")||"#A8A8A8"},get instagramBorder(){return f.getCssVar("--ins-social-instagram-border")||"#262626"},get instagramLink(){return f.getCssVar("--ins-social-instagram-link")||"#E0F1FF"},get tiktokCyan(){return f.getCssVar("--ins-social-tiktok-cyan")||"#25F4EE"},get tiktokPink(){return f.getCssVar("--ins-social-tiktok-pink")||"#FE2C55"},get tiktokBlue(){return f.getCssVar("--ins-social-tiktok-blue")||"#20D5EC"}}}},T={fillForm(e,t){if(!e||!t||typeof t!="object")return;const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;Object.keys(t).forEach(i=>{const s=n.querySelector(`[name="${i}"]`);if(s)switch(s.type){case"checkbox":s.checked=!!t[i];break;case"radio":const r=n.querySelector(`[name="${i}"][value="${t[i]}"]`);r&&(r.checked=!0);break;default:s.value=t[i]||""}}),Object.entries({id:"editConfigTitleId",key:"key",page:"page",title:"title",description:"description",created_at:"created_at",updated_at:"updated_at"}).forEach(([i,s])=>{const r=n.querySelector(`#${s}`);r&&t[i]!==void 0&&(i.endsWith("_at")?r.value=f.formatDate(t[i]):r.value=t[i]||"")})},clearFormErrors(e){if(!e)return;const t=typeof e=="string"?document.querySelector(e):e;if(!t)return;[".is-invalid",".is-valid",".invalid-feedback",".valid-feedback"].forEach(o=>{t.querySelectorAll(o).forEach(i=>{o.startsWith(".is-")?i.classList.remove(o.substring(1)):i.remove()})}),t.querySelectorAll(".text-danger.error-message").forEach(o=>o.remove()),t.classList.remove("was-validated")},resetForm(e){e&&(e.reset(),this.clearFormErrors(e))},displayFormErrors(e,t){if(!e||!t||typeof t!="object")return;e.classList.add("was-validated");let n=null;Object.entries(t).forEach(([o,i])=>{const s=e.querySelector(`[name="${o}"]`)||e.querySelector(`#${o}`);if(!s)return;s.classList.add("is-invalid"),s.classList.remove("is-valid");const r=s.parentNode.querySelector(".invalid-feedback");r&&r.remove();const a=document.createElement("div");a.className="invalid-feedback d-block";const c=document.createElement("i");c.className="bi bi-exclamation-circle me-1";const g=document.createTextNode(Array.isArray(i)?i[0]:String(i));a.appendChild(c),a.appendChild(g),s.parentNode.appendChild(a),n||(n=s)}),n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}))},showDuplicateConfirmation(e,t){const o=(window.i18n||{}).messages||{};document.documentElement.dir==="rtl"||document.documentElement.lang;let i="";t.duplicates&&t.duplicates.length>0&&(i=t.duplicates.map(u=>{const l={name:o.duplicate_match_name||"Name match",phone:o.duplicate_match_phone||"Phone match",email:o.duplicate_match_email||"Email match"}[u.match_type]||u.match_type,h=Math.round((u.confidence||0)*100);return`
                    <div class="card mb-2 border-warning">
                        <div class="card-body py-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>${f.escapeHtml(u.name)}</strong>
                                    <br><small class="text-muted">#${f.escapeHtml(u.file_number)}</small>
                                    ${u.phone?`<br><small class="text-muted">${f.escapeHtml(u.phone)}</small>`:""}
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-warning text-dark">${l}</span>
                                    <br><small class="text-muted">${o.duplicate_confidence||"Confidence"}: ${h}%</small>
                                </div>
                            </div>
                            <div class="mt-2">
                                <a href="${window.location.origin}${window.location.pathname.replace("/create","")}/${u.id}" 
                                   class="btn btn-sm btn-outline-primary" target="_blank">
                                    <i class="fas fa-eye me-1"></i>${o.view_existing||"View Existing"}
                                </a>
                            </div>
                        </div>
                    </div>
                `}).join(""));const s="duplicateConfirmModal";let r=document.getElementById(s);r&&r.remove();const a=`
            <div class="modal fade" id="${s}" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header bg-warning-subtle">
                            <h5 class="modal-title">
                                <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                ${o.duplicate_warning||"Potential Duplicate Patient"}
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p class="mb-3">${f.escapeHtml(t.message)}</p>
                            <div class="duplicate-list">
                                ${i}
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i>${o.cancel||"Cancel"}
                            </button>
                            <button type="button" class="btn btn-primary" id="confirmDuplicateBtn">
                                <i class="fas fa-plus me-1"></i>${o.create_anyway||"Create New Patient Anyway"}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;document.body.insertAdjacentHTML("beforeend",a),r=document.getElementById(s);let c;if(window.bootstrap&&window.bootstrap.Modal)c=new window.bootstrap.Modal(r),c.show();else{r.classList.add("show"),r.style.display="block",document.body.classList.add("modal-open");const u=document.createElement("div");u.className="modal-backdrop fade show",document.body.appendChild(u)}document.getElementById("confirmDuplicateBtn").addEventListener("click",async()=>{let u=e.querySelector('input[name="confirm_duplicate"]');if(u||(u=document.createElement("input"),u.type="hidden",u.name="confirm_duplicate",e.appendChild(u)),u.value="1",c)c.hide();else{r.classList.remove("show"),r.style.display="none",document.body.classList.remove("modal-open");const l=document.querySelector(".modal-backdrop");l&&l.remove()}const y=new Event("submit",{bubbles:!0,cancelable:!0});e.dispatchEvent(y)}),r.addEventListener("hidden.bs.modal",()=>{r.remove()})},async handleFormSubmit(e,t){if(!e||!t)return;e.preventDefault(),this.clearFormErrors(t);const n=t.closest(".modal");let o=t.querySelector('button[type="submit"]');!o&&n&&(o=n.querySelector(".modal-footer .btn-primary")||n.querySelector('.modal-footer button[type="button"]:not(.btn-secondary)')||n.querySelector('button[type="submit"]')),o||(o=t.querySelector(".btn-primary"));const i=o?.innerHTML||"",s=o?.disabled||!1;if(o){o.disabled=!0;const a=window.i18n&&window.i18n.messages&&window.i18n.messages.processing?window.i18n.messages.processing:"";o.innerHTML='<i class="bi bi-hourglass-split"></i> '+a}const r=()=>{o&&(o.disabled=s,o.innerHTML=i)};try{const a=new FormData(t),c=t.action||window.location.href,g={"X-CSRF-TOKEN":f.getCSRFToken(),Accept:"application/json","X-Requested-With":"XMLHttpRequest"};if(C&&C.siteKey){const p=a.get("g-recaptcha-response"),w=a.get("recaptcha_action");if(!p||!w){const b=C.deriveAction(t),_=await C.execute(b);_&&(a.set("g-recaptcha-response",_),a.set("recaptcha_action",b),g["X-Recaptcha-Token"]=_)}else g["X-Recaptcha-Token"]=String(p)}const u=new AbortController,y=setTimeout(()=>u.abort(),3e4),l=await fetch(c,{method:"POST",body:a,signal:u.signal,credentials:"same-origin",headers:g});clearTimeout(y);const h=(l.headers.get("content-type")||"").toLowerCase();let d=null;if(h.includes("application/json")){try{let w=await l.clone().text();w.charCodeAt(0)===65279&&(w=w.slice(1)),w=w.replace(/^\xEF\xBB\xBF/,"").trim(),d=JSON.parse(w)}catch{throw new Error(window.i18n?.messages?.invalid_server_response||"Invalid server response")}const p=d&&d.success===!1;if(l.ok&&!p){const w=d.message||window.i18n?.messages?.operation_completed_successfully||"";if(d.redirect){try{sessionStorage.setItem("toastMessage",JSON.stringify({message:w,type:"success"}))}catch{}setTimeout(()=>{window.location.assign(d.redirect)},10);return}r(),v.show(w,"success"),n&&F.hide(n),window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload()}else{if(d&&d.requires_confirmation&&d.duplicates){r(),this.showDuplicateConfirmation(t,d);return}if(d&&d.errors&&(r(),this.displayFormErrors(t,d.errors)),d&&d.redirect){d.message&&sessionStorage.setItem("toastMessage",JSON.stringify({message:d.message,type:l.status>=500?"danger":"warning"})),window.location.href=d.redirect;return}if(d&&d.message&&(r(),v.show(d.message,l.status>=500?"danger":"warning")),l.status===403){v.show(window.i18n?.messages?.not_authorized||"","warning"),setTimeout(()=>{window.location.href=Y},600);return}if(d&&(d.errors||d.message||d.redirect))return;r();const w=d&&(d.message||d.error)||window.i18n?.messages?.operation_failed||"";throw new Error(w)}}else{if(l.redirected){window.location.href=l.url;return}const p=await l.text();if(l.ok){if(p&&(p.includes("<!DOCTYPE html")||p.includes("<html"))){document.open(),document.write(p),document.close();return}window.location.reload();return}throw r(),new Error(window.i18n?.messages?.unexpected_response||"")}}catch(a){r(),a.name==="AbortError"?v.show(window.i18n?.messages?.request_timeout||"","danger"):v.show(a.message||window.i18n?.messages?.an_error_occurred||"","danger")}}};window.FormManager=T;const F={_resolve(e){return typeof e=="string"?document.getElementById(e)||document.querySelector(e):e},show(e){if(e=this._resolve(e),!e)return;e.style.display="block",e.classList.add("show","in"),e.classList.remove("out"),document.body.classList.add("modal-open");const t=document.createElement("div");t.className="modal-backdrop fade show",t.id=`modal-backdrop-${Date.now()}`,document.body.appendChild(t);const n=o=>{o.key==="Escape"&&(this.hide(e),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n),t.addEventListener("click",()=>this.hide(e)),e._cleanup=()=>{document.removeEventListener("keydown",n)}},hide(e){e=this._resolve(e),e&&(e.style.display="none",e.classList.remove("show","in"),e.classList.add("out"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove()),e._cleanup&&(e._cleanup(),delete e._cleanup))}},E={currentDataTable:null,setCurrentDataTable(e){this.currentDataTable=e,window.currentDataTable=e},getCurrentDataTable(){return this.currentDataTable},initializeColumnVisibility(e=".dataTable",t=".column-toggle"){document.querySelector(e)&&(document.querySelectorAll(t).forEach(o=>{o.addEventListener("change",()=>{this.currentDataTable&&this.currentDataTable.column(parseInt(o.dataset.column)).visible(o.checked),this.updateColumnCount(t)})}),this.updateColumnCount(t))},toggleAllColumns(e,t=".column-toggle"){document.querySelectorAll(t).forEach(n=>{n.checked=e,this.currentDataTable&&this.currentDataTable.column(parseInt(n.dataset.column)).visible(e)}),this.updateColumnCount(t)},updateColumnCount(e=".column-toggle",t="column-count"){const n=document.querySelectorAll(e),o=Array.from(n).filter(r=>r.checked).length,i=n.length,s=document.getElementById(t);s&&(s.textContent=`${o} of ${i} columns visible`)},exportTableToCSV(e=".dataTable",t="export.csv",n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const s=this.extractTableData(o,n).map(r=>r.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")).join(`
`);this.downloadFile(s,t,"text/csv;charset=utf-8;"),v.show(window.i18n?.messages?.table_export_success||"","success")},copyTableToClipboard(e=".dataTable",t=!0){const n=document.querySelector(e);if(!n){console.error("Table not found");return}const i=this.extractTableData(n,t).map(s=>s.join("	")).join(`
`);navigator.clipboard.writeText(i).then(()=>{v.show(window.i18n?.messages?.table_copy_success||"","success")}).catch(s=>{console.error("Failed to copy to clipboard:",s),v.show(window.i18n?.messages?.table_copy_failed||"","danger")})},printTable(e=".dataTable",t=null,n=!0){const o=document.querySelector(e);if(!o){console.error("Table not found");return}const i=t||window.i18n?.messages?.data_export||"",s=window.i18n?.messages?.generated_on||"",r=this.extractTableData(o,n),a=this.generatePrintableTable(r),c=window.open("","_blank");c.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>${i}</title>
                <meta charset="utf-8">
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; font-weight: bold; }
                    tr:nth-child(even) { background-color: #f9f9f9; }
                    tr:hover { background-color: #f5f5f5; }
                    @media print {
                        .no-print { display: none; }
                        body { margin: 0; }
                        table { page-break-inside: auto; }
                        tr { page-break-inside: avoid; page-break-after: auto; }
                        th { page-break-after: avoid; }
                    }
                    @page { margin: 1cm; }
                </style>
            </head>
            <body>
                <h2>${i}</h2>
                <p style="color: #666; font-size: 12px; margin-bottom: 20px;">
                    ${s} ${new Date().toLocaleString()}
                </p>
                ${a}
            </body>
            </html>
        `),c.document.close(),c.focus(),setTimeout(()=>{c.print()},H.PRINT_DELAY),v.show(window.i18n?.messages?.print_dialog_opened||"","info")},extractTableData(e,t){const n=[],o=[];return e.querySelectorAll("thead th").forEach((r,a)=>{(!t||!this.currentDataTable||this.currentDataTable.column(a).visible())&&o.push(f.stripHtml(r.textContent.trim()))}),n.push(o),e.querySelectorAll("tbody tr").forEach(r=>{const a=[];r.querySelectorAll("td").forEach((g,u)=>{(!t||!this.currentDataTable||this.currentDataTable.column(u).visible())&&a.push(f.stripHtml(g.textContent.trim()))}),a.length>0&&n.push(a)}),n},generatePrintableTable(e){if(!e.length)return`<p>${window.i18n?.messages?.no_data_to_display||""}</p>`;const[t,...n]=e,o=t.map(s=>`<th>${s}</th>`).join(""),i=n.map(s=>`<tr>${s.map(r=>`<td>${r}</td>`).join("")}</tr>`).join("");return`
            <table>
                <thead><tr>${o}</tr></thead>
                <tbody>${i}</tbody>
            </table>
        `},downloadFile(e,t,n){const o=new Blob([e],{type:n}),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}},q={initializeDropdownBehavior(e=".dropdown-menu"){document.querySelectorAll(e).forEach(t=>{t.addEventListener("click",n=>{t.querySelector(".column-toggle")&&n.stopPropagation()})})},bindPasswordToggle(e=null,t=null){if(e&&t){const r=document.querySelector(e),a=document.querySelector(t);r&&a&&this.setupPasswordToggle(r,a);return}const n=document.querySelectorAll(".input-group");let o=!1;if(n.forEach(r=>{const a=r.querySelector("input[type='password']"),c=r.querySelector("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");a&&c&&(this.setupPasswordToggle(c,a),o=!0)}),o)return;const i=document.querySelectorAll("input[type='password']"),s=document.querySelectorAll("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");!s.length||!i.length||(i.length===1&&s.length===1?this.setupPasswordToggle(s[0],i[0]):i.forEach((r,a)=>{const c=s[a];c&&this.setupPasswordToggle(c,r)}))},setupPasswordToggle(e,t){e.__passwordToggleBound||(e.__passwordToggleBound=!0,e.addEventListener("click",()=>{const n=t.type==="password";t.type=n?"text":"password",typeof e.innerHTML<"u"&&(e.innerHTML=n?'<i class="bi bi-eye-slash"></i>':'<i class="bi bi-eye"></i>')}))}},m={_headers(e={}){return Object.assign({"X-CSRF-TOKEN":f.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},e)},async _attachRecaptcha(e,t,n="post",o=null){if(!C||!C.siteKey)return null;try{const i=o||C.deriveActionFromUrl(t,n),s=await C.execute(i);if(s)return e["X-Recaptcha-Token"]=s,{token:s,action:i}}catch{}return null},async _parseResponse(e){let t=null;if((e.headers.get("content-type")||"").toLowerCase().includes("application/json"))try{t=await e.json()}catch{}return{result:t,wasRedirected:e.redirected===!0,finalUrl:e.url||null}},async _rawRequest(e,t,n={}){const o=n instanceof FormData,i=this._headers();return o&&delete i["Content-Type"],(await fetch(t,{method:e,credentials:"same-origin",headers:i,body:o?n:JSON.stringify(n)})).json()},async deleteItem(e,t={}){return this.requestJson(e,Object.assign({successMessage:window.i18n?.toasts?.delete_success||"",errorMessage:window.i18n?.toasts?.delete_failed||""},t,{method:"DELETE"}))},async confirmDelete(e,t=null,n=null,o=null){const i=document.getElementById("confirmModal"),s=document.getElementById("confirmMessage"),r=document.getElementById("confirmDeleteBtn");if(i&&s&&r){s.textContent=(n.confirm.message||"").replace(":item",o);const a=r.cloneNode(!0);r.parentNode.replaceChild(a,r),a.addEventListener("click",function(){hideModal(i),window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(i)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")},async activationStatus(e,t={}){const{action:n,...o}=t;return n?this.requestJson(e,Object.assign({successMessage:window.i18n?.toasts?.activate_success||"",errorMessage:window.i18n?.toasts?.activate_failed||""},o,{method:"POST",data:{action:n}})):(console.error("activationStatus: action is required (activate|deactivate)"),!1)},async requestJson(e,t={}){const{method:n="POST",data:o=null,headers:i={},onSuccess:s,onError:r,successMessage:a=window.i18n?.messages?.operation_completed_successfully||"",errorMessage:c=window.i18n?.messages?.operation_failed||"",redirectOnSuccess:g=!1,redirectUrl:u=null,showSuccessToast:y=!0,showErrorToast:l=!0}=t;if(!e)return console.error("requestJson: resourceUrl is required"),!1;try{const h=String(n||"POST").toUpperCase(),d=this._headers(i);let p=o??null;if(["POST","PUT","PATCH","DELETE"].includes(h)){const L=await this._attachRecaptcha(d,e,h.toLowerCase());L&&p&&typeof p=="object"&&(p={...p,"g-recaptcha-response":L.token,recaptcha_action:L.action})}const w=await fetch(e,{method:h,credentials:"same-origin",headers:d,body:p===null?null:JSON.stringify(p)}),{result:b,wasRedirected:_,finalUrl:S}=await this._parseResponse(w),k=b?.success===!1;if(w.ok&&!k){if(_&&S)return window.location.href=S,!0;if(b?.redirect)return window.location.href=b.redirect,!0;if(g&&u)return window.location.href=u,!0;if(y&&v.show(b?.message||a,"success"),typeof s=="function")try{s(b,w)}catch(L){console.warn("onSuccess error:",L)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}const B=new Error(b?.message||b?.error||c);if(typeof r=="function")try{r(B,w,b)}catch(L){console.warn("onError error:",L)}return l&&v.show(B.message,w.status>=500?"danger":"warning"),!1}catch(h){if(console.error("requestJson error:",h),typeof r=="function")try{r(h)}catch(d){console.warn("onError error:",d)}return l&&v.show(h.message||c,"danger"),!1}},bindSelectJsonUpdate(e={}){const{selector:t="[data-update-url]",urlAttr:n="data-update-url",method:o="PUT",valueKey:i="status",prevValueDatasetKey:s="prevValue",disableDuringRequest:r=!0,idAttr:a=null,badgeAttr:c=null,renderBadge:g=null,successMessage:u=window.i18n?.toasts?.status_updated||window.i18n?.messages?.operation_completed_successfully||"",errorMessage:y=window.i18n?.toasts?.status_update_failed||window.i18n?.messages?.operation_failed||"",showSuccessToast:l=!0,showErrorToast:h=!0,buildData:d=null,onSuccess:p=null,onError:w=null}=e;document.querySelectorAll(t).forEach(b=>{!b||b.tagName!=="SELECT"||b.__crudSelectJsonUpdateBound||(b.__crudSelectJsonUpdateBound=!0,b.dataset[s]=String(b.value||""),b.addEventListener("change",async function(){const _=this.getAttribute(n),S=String(this.value||""),k=String(this.dataset[s]||"");if(S===k)return;if(!_){this.value=k;return}const B=typeof d=="function"?d(this):{[i]:S},L=this.disabled;r&&(this.disabled=!0);let V=null;if(a&&c){const x=this.getAttribute(a);x&&(V=document.querySelector(`[${c}="${x}"]`))}await m.requestJson(_,{method:o,data:B,successMessage:u,errorMessage:y,showSuccessToast:l,showErrorToast:h,onSuccess:(x,M)=>{if(this.dataset[s]=S,V&&typeof g=="function")try{V.textContent=String(g(S,this,x,M)||"")}catch{}if(typeof p=="function")try{p(this,x,M)}catch(I){console.warn("onSuccess hook failed:",I)}},onError:(x,M,I)=>{if(typeof w=="function")try{w(this,x,M,I)}catch(oe){console.warn("onError hook failed:",oe)}}})||(this.value=k),r&&(this.disabled=L)}))})},bindStatusSelect(e={},t=null,n=null){if(typeof e=="string"){const o=e,i=typeof t=="function"?t:null,s=n||window.i18n||{};return this.bindSelectJsonUpdate({selector:o,urlAttr:"data-update-url",method:"PUT",valueKey:"status",idAttr:"data-status-id",badgeAttr:"data-status-badge",renderBadge:i,successMessage:s?.toasts?.status_updated||s?.messages?.operation_completed_successfully,errorMessage:s?.toasts?.status_update_failed||s?.messages?.operation_failed,showSuccessToast:!0,showErrorToast:!0})}return this.bindSelectJsonUpdate(e||{})},confirmActivate(e={},t=null,n=null){let o;if(e&&(e.itemLabel||e.resourceUrl||e.action||e.message||e.confirmText))o={...e};else{const c=e||{},g=n||window.i18n||{};o={itemLabel:c.title||c.key||c.full_name||c.name||"",resourceUrl:t||c.url||"",action:typeof c.active<"u"&&c.active?"deactivate":"activate",message:g.confirm?.message||null,successMessage:g.toasts?.activate_success||null,errorMessage:g.toasts?.activate_failed||null}}if(!o.resourceUrl){console.error("confirmActivate: resourceUrl is required");return}const i=document.getElementById("confirmActivateModal"),s=document.getElementById("confirmActivateMessage"),r=document.getElementById("confirmActivateBtn"),a=()=>{this.activationStatus(o.resourceUrl,{action:o.action,successMessage:o.successMessage,errorMessage:o.errorMessage,onSuccess:o.onSuccess,onError:o.onError,redirectOnSuccess:o.redirectOnSuccess,redirectUrl:o.redirectUrl})};if(i&&s&&r){const c=o.message||window.i18n?.confirm?.activate_message||window.i18n?.confirm?.message||"";s.textContent=c.replace(":item",o.itemLabel||"");const g=r.cloneNode(!0);o.confirmText&&(g.textContent=o.confirmText),o.confirmClass&&(g.className=o.confirmClass),r.parentNode.replaceChild(g,r),g.addEventListener("click",()=>{try{hideModal(i)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(i)?.hide()}catch{}}a()});try{showModal(i)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(i)?.show()}catch{}}}else a()},async getJson(e,t={}){if(!e)return console.error("getJson: url is required"),null;const n=new URLSearchParams(t).toString();return(await fetch(n?`${e}?${n}`:e,{method:"GET",credentials:"same-origin",headers:this._headers()})).json()},async getHtml(e){return e?(await fetch(e,{method:"GET",credentials:"same-origin",headers:this._headers({Accept:"text/html"})})).text():(console.error("getHtml: url is required"),"")},bindForm:function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;!n||n.__crudFormBound||(n.__crudFormBound=!0,n.__handleSubmitBound=!0,n.addEventListener("submit",async o=>{o.preventDefault(),await this.submitForm(n,t)}))},submitForm:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return null;const{onSuccess:o,onError:i,onBefore:s,onComplete:r,loadingText:a="Processing...",resetOnSuccess:c=!1,closeModalOnSuccess:g=!0}=t,u=n.querySelector('button[type="submit"], .btn-primary'),y=u?.innerHTML,l=n.closest(".modal");if(s&&s(n)===!1)return null;u&&(u.disabled=!0,u.innerHTML=`<i class="bi bi-hourglass-split me-1"></i>${a}`);const h=()=>{u&&(u.disabled=!1,u.innerHTML=y)};try{const d=new FormData(n),p=n.action||window.location.href,w=this._headers();delete w["Content-Type"];const b=await this._attachRecaptcha(w,p,"post");b&&d.append("g-recaptcha-response",b.token);const S=await(await fetch(p,{method:"POST",credentials:"same-origin",headers:w,body:d})).json();if(h(),S.success){if(c&&n.reset(),g&&l)try{bootstrap.Modal.getInstance(l)?.hide()}catch{hideModal(l)}if(S.redirect)return window.location.href=S.redirect,S;if(o?o(S):S.message&&v.show(S.message,"success"),window.currentDataTable?.ajax?.reload)try{window.currentDataTable.ajax.reload(null,!1)}catch{}}else i?i(S):S.errors?this.showFormErrors(n,S.errors):S.message&&v.show(S.message,"danger");return r&&r(S),S}catch(d){return h(),i?i({success:!1,message:d.message}):v.show(d.message||window.i18n?.messages?.network_error||"Network Error","danger"),r&&r({success:!1,error:d}),null}},showFormErrors:function(e,t){if(this.clearFormErrors(e),!e||!t||typeof t!="object")return;e.classList.add("was-validated");let n=null;Object.entries(t).forEach(([o,i])=>{const s=e.querySelector(`[name="${o}"], [name="${o}[]"]`)||e.querySelector(`#${o}`);if(!s)return;s.classList.add("is-invalid");const r=s.parentNode.querySelector(".invalid-feedback");r&&r.remove();const a=document.createElement("div");a.className="invalid-feedback d-block";const c=document.createElement("i");c.className="bi bi-exclamation-circle me-1",a.appendChild(c),a.appendChild(document.createTextNode(Array.isArray(i)?i[0]:String(i))),s.parentNode.appendChild(a),n||(n=s)}),n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}))},clearFormErrors:function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&(t.querySelectorAll(".is-invalid, .is-valid").forEach(n=>n.classList.remove("is-invalid","is-valid")),t.querySelectorAll(".invalid-feedback, .valid-feedback, .text-danger.error-message").forEach(n=>n.remove()),t.classList.remove("was-validated"))},getFormData:function(e){const t=typeof e=="string"?document.querySelector(e):e;return t?Object.fromEntries(new FormData(t)):{}},setFormData:function(e,t){const n=typeof e=="string"?document.querySelector(e):e;!n||!t||Object.entries(t).forEach(([o,i])=>{const s=n.querySelector(`[name="${o}"]`);if(s)if(s.type==="checkbox")s.checked=!!i;else if(s.type==="radio"){const r=n.querySelector(`[name="${o}"][value="${i}"]`);r&&(r.checked=!0)}else s.value=i})},async toggleFavorite(e,t,n={}){const{removeCard:o=!0,onSuccess:i,successMessage:s,errorMessage:r}=n,a=e.closest(".col-lg-6, .col-md-6, .card"),c=e.querySelector("i"),g=c?.className;c&&(c.className="bi bi-hourglass-split fs-5"),e.disabled=!0;try{const u=this._headers();await this._attachRecaptcha(u,t,"post","toggle_favorite");const l=await(await fetch(t,{method:"POST",credentials:"same-origin",headers:u,body:JSON.stringify({})})).json();l.success?(o&&a&&(a.style.transition="opacity 0.3s, transform 0.3s",a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(()=>{a.remove(),document.querySelectorAll(".col-lg-6, .col-md-6").length===0&&location.reload()},300)),v.show(s||l.message||window.i18n?.messages?.updated||"Updated!","success"),i&&i(l)):(c&&(c.className=g),e.disabled=!1,v.show(r||l.message||window.i18n?.messages?.error||"Error","danger"))}catch{c&&(c.className=g),e.disabled=!1,v.show(window.i18n?.messages?.network_error||"Network Error","danger")}},async confirmDeleteSwal(e,t={}){const{confirmTitle:n=window.i18n?.messages?.are_you_sure||"Are you sure?",confirmText:o=window.i18n?.messages?.action_cannot_be_undone||"This action cannot be undone.",confirmButton:i=window.i18n?.messages?.yes_delete||"Yes, Delete",onSuccess:s}=t;if(typeof Swal>"u"){if(!confirm(o))return}else if(!(await Swal.fire({icon:"warning",title:n,text:o,showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:i})).isConfirmed)return;return this.deleteItem(e,{onSuccess:s||(()=>location.reload())})}};Object.assign(window,{Toast:v,showToast:(e,t,n)=>v.show(e,t,n),fillForm:T.fillForm.bind(T),clearFormErrors:T.clearFormErrors.bind(T),resetForm:T.resetForm.bind(T),displayFormErrors:T.displayFormErrors.bind(T),handleFormSubmit:T.handleFormSubmit.bind(T),showModal:F.show.bind(F),hideModal:F.hide.bind(F),initializeColumnVisibility:E.initializeColumnVisibility.bind(E),toggleAllColumns:E.toggleAllColumns.bind(E),updateColumnCount:E.updateColumnCount.bind(E),exportTableToCSV:E.exportTableToCSV.bind(E),copyTableToClipboard:E.copyTableToClipboard.bind(E),printTable:E.printTable.bind(E),setCurrentDataTable:E.setCurrentDataTable.bind(E),getCurrentDataTable:E.getCurrentDataTable.bind(E),initializeDropdownBehavior:q.initializeDropdownBehavior.bind(q),bindPasswordToggle:q.bindPasswordToggle.bind(q),Utils:f,SwalHelper:X,stripHtml:f.stripHtml,removeHtmlTags:f.removeHtmlTags,escapeHtml:f.escapeHtml,truncateWords:f.truncateWords,safeJsonParse:f.safeJsonParse,getCSRFToken:f.getCSRFToken,CRUDManager:m,deleteItem:m.deleteItem.bind(m),confirmDelete:m.confirmDelete?m.confirmDelete.bind(m):void 0,confirmDeleteSwal:m.confirmDeleteSwal.bind(m),confirmActivate:m.confirmActivate.bind(m),activationStatus:m.activationStatus.bind(m),requestJson:m.requestJson.bind(m),bindSelectJsonUpdate:m.bindSelectJsonUpdate.bind(m),bindStatusSelect:m.bindStatusSelect.bind(m),bindForm:m.bindForm.bind(m),submitFormAjax:m.submitForm.bind(m),showFormErrors:m.showFormErrors.bind(m),clearFormValidation:m.clearFormErrors.bind(m),getFormData:m.getFormData.bind(m),setFormData:m.setFormData.bind(m),toggleFavorite:m.toggleFavorite.bind(m)});window.clearForm||(window.clearForm=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&(t.querySelectorAll("input.form-control, textarea.form-control").forEach(n=>{n.type==="checkbox"||n.type==="radio"?n.checked=!1:n.value=""}),t.querySelectorAll("select").forEach(n=>{Array.from(n.options).forEach(o=>{o.selected=!1}),n._choices&&n._choices.removeActiveItems(),n.dispatchEvent(new Event("change",{bubbles:!0}))}))});window.clearErrors||(window.clearErrors=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&t.querySelectorAll(".error").forEach(n=>n.remove())});window.handleSubmit||(window.handleSubmit=function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;n&&(n.__handleSubmitBound||(n.__handleSubmitBound=!0,n.addEventListener("submit",async function(o){o.stopImmediatePropagation(),o.preventDefault();try{await window.FormManager.handleFormSubmit(o,n)}catch(i){console.error("handleSubmit error:",i),v.show(i?.message||window.i18n?.messages?.an_error_occurred||"","danger")}},!0)))});window.__recaptchaGlobalSubmitListenerAdded||(window.__recaptchaGlobalSubmitListenerAdded=!0,document.addEventListener("submit",async function(e){const t=e.target;if(!t||t.tagName!=="FORM"||t.__handleSubmitBound||t.dataset&&t.dataset.recaptchaSkip==="1"||t.dataset&&t.dataset.submitNative==="1"||t.__recaptchaSubmitInProgress)return;const n=String(t.getAttribute("method")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(n)){e.preventDefault(),t.__recaptchaSubmitInProgress=!0;try{await window.FormManager.handleFormSubmit(e,t)}catch(o){console.error("Global submit handler error:",o)}finally{t.__recaptchaSubmitInProgress=!1}}},!0));async function ge(e,t=null,n={}){const{successText:o='<i class="bi bi-check me-1"></i>Copied!',successClass:i="btn-success",originalClass:s="btn-outline-secondary",timeout:r=2e3}=n;try{if(navigator.clipboard)await navigator.clipboard.writeText(e);else{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}if(t){const a=t.innerHTML;t.innerHTML=o,t.classList.add(i),t.classList.remove(s),setTimeout(()=>{t.innerHTML=a,t.classList.remove(i),t.classList.add(s)},r)}return!0}catch(a){return console.error("Copy failed:",a),!1}}window.copyToClipboard=ge;window.ApiClient={getToken:f.getCSRFToken,get:(e,t)=>m.getJson(e,t),getHtml:e=>m.getHtml(e),post:(e,t={})=>m._rawRequest("POST",e,t),put:(e,t={})=>m._rawRequest("PUT",e,t),delete:(e,t={})=>m._rawRequest("DELETE",e,t),request:(e,t={})=>m.requestJson(e,{method:t.method,data:t.data}),submitForm:(e,t)=>m.submitForm(e,t)};window.FormHelper={bind:m.bindForm.bind(m),submit:m.submitForm.bind(m),showErrors:m.showFormErrors.bind(m),clearErrors:m.clearFormErrors.bind(m),getData:m.getFormData.bind(m),setData:m.setFormData.bind(m),toggleFavorite:m.toggleFavorite.bind(m),confirmDelete:m.confirmDeleteSwal.bind(m)};window.formatDate=f.formatDate;window.initChoicesSelect=async function(e="select.select2, select[data-choices], .choices-select",t={}){if(typeof window.loadChoices!="function")return[];const n=await window.loadChoices(),o=[];let i;if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof NodeList)i=e;else if(e instanceof Element)i=[e];else return[];return i.forEach(s=>{if(!s||s.tagName!=="SELECT"||s._choices||s.dataset.choicesInitialized)return;const r=window.i18n?.messages?.select_an_option,a=s.getAttribute("data-placeholder")||s.getAttribute("placeholder"),c=r||a||(document.documentElement.lang==="ar"?" ":"Select an option"),g={searchEnabled:s.options.length>5,itemSelectText:"",shouldSort:!1,allowHTML:!0,searchPlaceholderValue:window.i18n?.common?.search||"Search...",noResultsText:window.i18n?.common?.no_results||"No results found",noChoicesText:window.i18n?.common?.no_results||"No results found",removeItemButton:s.hasAttribute("multiple"),placeholder:!0,placeholderValue:c};try{const u=new n(s,{...g,...t});s._choices=u,s.dataset.choicesInitialized="true",o.push(u)}catch(u){console.warn("Choices init failed:",u)}}),o};document.addEventListener("DOMContentLoaded",()=>{try{q.bindPasswordToggle(),q.initializeDropdownBehavior();const e=sessionStorage.getItem("toastMessage");if(e){try{const{message:t,type:n}=JSON.parse(e);t&&v.show(t,n||"info")}catch{}sessionStorage.removeItem("toastMessage")}window.initChoicesSelect().catch(()=>null),setTimeout(()=>{window.initChoicesSelect().catch(()=>null)},400),console.log(" JavaScript Utilities Loaded")}catch(e){console.warn("Auto-initialization warning:",e)}});document.addEventListener("click",function(e){if(e.target.matches('[data-bs-dismiss="modal"]')||e.target.closest('[data-bs-dismiss="modal"]')){const t=e.target.closest(".modal");t&&hideModal(t)}});function pe(){const e=A(()=>import("./swiper-DpKYHp1-.js"),__vite__mapDeps([0,1])),t=A(()=>import("./index-BvN21dhf.js"),__vite__mapDeps([2,1]));return Promise.all([e,t]).then(([n,o])=>{const i=n.default||n.Swiper||n,s={Navigation:o.Navigation,Pagination:o.Pagination,Autoplay:o.Autoplay,EffectFade:o.EffectFade,EffectCreative:o.EffectCreative,EffectCoverflow:o.EffectCoverflow,Thumbs:o.Thumbs};return{Swiper:i,modules:s}})}function he(e,t){document.querySelectorAll('.swiper[data-swiper="category"]').forEach(n=>{const o=n.querySelector(".swiper-button-next"),i=n.querySelector(".swiper-button-prev"),s=n.querySelector(".swiper-pagination"),r=!!(o&&i),c=n.querySelectorAll(".swiper-slide").length>=3,g=[t.Pagination,t.Autoplay,t.EffectCoverflow];r&&g.push(t.Navigation),new e(n,{modules:g,loop:c,rewind:!c,watchOverflow:!0,speed:650,autoplay:{delay:3800,disableOnInteraction:!1},grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:6,stretch:0,depth:120,modifier:1,slideShadows:!0},centeredSlides:!1,slidesPerView:1,spaceBetween:20,breakpoints:{576:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:24},992:{slidesPerView:1,spaceBetween:28}},pagination:{el:s,clickable:!0},...r?{navigation:{nextEl:o,prevEl:i}}:{}})})}function we(e,t){document.querySelectorAll(".product-gallery").forEach(n=>{const o=n.querySelector('.swiper[data-swiper="product"]'),i=n.querySelector('.swiper[data-swiper="product-thumbs"]');let s=null;if(i&&(s=new e(i,{modules:[t.Navigation],slidesPerView:5,spaceBetween:8,freeMode:!0,watchSlidesProgress:!0,breakpoints:{0:{slidesPerView:4},576:{slidesPerView:5}}})),o){const r=o.querySelector(".swiper-pagination");new e(o,{modules:[t.Pagination,t.EffectFade,t.Thumbs],loop:!0,speed:500,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:1,spaceBetween:8,pagination:{el:r,clickable:!0},thumbs:s?{swiper:s}:void 0})}})}function z(){document.querySelector(".swiper")&&pe().then(({Swiper:t,modules:n})=>{he(t,n),we(t,n)}).catch(()=>{})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",z):z();function R(){document.querySelectorAll('input[type="tel"], input#phone, input[name="phone"]').forEach(t=>{t.classList.contains("phone-initialized")||(t.classList.add("phone-initialized"),t.placeholder||(t.placeholder="09xxxxxxxx"))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",R):R();function be(){R()}window.initPhoneInputs=R;window.reinitPhoneInputs=be;window.bootstrap=ie;function D(e){let t=null;return()=>(t||(t=e().then(n=>n&&n.default?n.default:n)),t)}const K=D(()=>A(()=>import("./index-BZ7OSNzo.js"),[])),Q=D(()=>A(()=>import("./choices-DNEFJAfy.js"),[])),Z=D(()=>A(()=>import("./sweetalert2.esm.all-Dx3EkU1z.js"),[])),ee=D(()=>A(()=>import("./quill-ChYgufvi.js"),__vite__mapDeps([3,4]))),te=D(()=>A(()=>import("./easymde-Ca5tH7jq.js").then(e=>e.e),__vite__mapDeps([5,4]))),ne=D(()=>A(()=>import("./jsvectormap.esm-Ba9GIb0h.js"),[]));window.DataTable=J;globalThis.DataTable=J;window.loadFlatpickr=K;window.loadChoices=Q;window.loadSwal=Z;window.loadQuill=ee;window.loadSimpleMDE=te;window.loadJSVectorMap=ne;function P(e){let t=null;const n=()=>(t||(t=e()),t);return new Proxy({},{get(o,i){if(i!=="then")return(...s)=>n().then(r=>{const a=r[i];return typeof a=="function"?a.apply(r,s):a})}})}window.Swal=P(Z);window.flatpickr=(...e)=>K().then(t=>t(...e));window.Choices=P(Q);window.Quill=P(ee);window.SimpleMDE=P(te);window.JSVectorMap=P(ne);
